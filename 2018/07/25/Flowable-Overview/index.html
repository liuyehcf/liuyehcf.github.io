<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":false,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="阅读更多">
<meta property="og:type" content="article">
<meta property="og:title" content="Flowable-Overview">
<meta property="og:url" content="http://example.com/2018/07/25/Flowable-Overview/index.html">
<meta property="og:site_name" content="Liuye Notebook">
<meta property="og:description" content="阅读更多">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2018-07-25T03:31:35.000Z">
<meta property="article:modified_time" content="2021-02-23T14:19:53.793Z">
<meta property="article:author" content="Liuyehcf">
<meta property="article:tag" content="原创">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/2018/07/25/Flowable-Overview/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Flowable-Overview | Liuye Notebook</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Liuye Notebook</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-explore">

    <a href="/explore/" rel="section"><i class="fa fa-sitemap fa-fw"></i>发现</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2018/07/25/Flowable-Overview/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Liuyehcf">
      <meta itemprop="description" content="大音希声，大象无形">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Liuye Notebook">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Flowable-Overview
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-07-25 11:31:35" itemprop="dateCreated datePublished" datetime="2018-07-25T11:31:35+08:00">2018-07-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-02-23 22:19:53" itemprop="dateModified" datetime="2021-02-23T22:19:53+08:00">2021-02-23</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/Framework/" itemprop="url" rel="index"><span itemprop="name">Framework</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/Framework/Flowable/" itemprop="url" rel="index"><span itemprop="name">Flowable</span></a>
                </span>
            </span>

          
            <span id="/2018/07/25/Flowable-Overview/" class="post-meta-item leancloud_visitors" data-flag-title="Flowable-Overview" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2018/07/25/Flowable-Overview/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2018/07/25/Flowable-Overview/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p><strong>阅读更多</strong></p>
<a id="more"></a>
<h1 id="1-overview"><a class="markdownIt-Anchor" href="#1-overview"></a> 1 Overview</h1>
<p><strong>概念</strong></p>
<ol>
<li><code>Process</code>：文中称为<code>流程</code>、<code>执行流</code>
<ul>
<li><code>instance</code>：文中称为<code>实例</code></li>
</ul>
</li>
<li><code>Event</code>：文中称为<code>事件</code></li>
<li><code>Flow</code>：文中称为<code>连线</code></li>
<li><code>Gateway</code>：文中称为<code>网关</code></li>
<li><code>Task</code>：文中称为<code>任务</code></li>
<li><code>Activity</code>：流程中的一个实体都可以成为<code>Activity</code>，包括<code>Event</code>、<code>Gateway</code>、<code>Task</code>等等</li>
<li><code>Variable</code>：变量</li>
<li><code>Expression</code>：表达式，通常指<code>UEL</code></li>
</ol>
<h1 id="2-event"><a class="markdownIt-Anchor" href="#2-event"></a> 2 Event</h1>
<p><code>BPMN 2.0</code>中，存在两种主要的event类型</p>
<ol>
<li><code>Catching</code>：当<code>process</code>执行到此类event时，它会等待某个<code>trigger</code>来触发</li>
<li><code>Throwing</code>：当<code>process</code>执行到此类event时，一个<code>trigger</code>被触发</li>
</ol>
<p><strong>参考</strong></p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.flowable.org/docs/userguide/index.html#bpmnEvents">Event</a></li>
</ul>
<h2 id="21-event-definitions"><a class="markdownIt-Anchor" href="#21-event-definitions"></a> 2.1 Event Definitions</h2>
<p><code>Event Definitions</code>定义了<code>event</code>的具体语义（semantics），如果一个<code>event</code>不包含<code>Event Definitions</code>，那么这个事件不执行任何操作</p>
<h3 id="211-timer-event-definitions"><a class="markdownIt-Anchor" href="#211-timer-event-definitions"></a> 2.1.1 Timer Event Definitions</h3>
<p><strong>Description</strong></p>
<blockquote>
<p>顾名思义，<code>Timer events</code>由一个事先定义好的<code>timer</code>来触发，可以用于<code>start event</code>、<code>intermediate event</code>、<code>boundary event</code></p>
</blockquote>
<blockquote>
<p>我们可以定义多种不同的<code>timer</code>，主要包括如下三种（关于<code>timer</code>的详细语法请参考<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/ISO_8601#Dates">ISO 8601</a>）</p>
</blockquote>
<blockquote>
<ol>
<li><code>timeDate</code></li>
<li><code>timeDuration</code></li>
<li><code>timeCycle</code></li>
</ol>
</blockquote>
<p><strong>XML representation</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- timeDate --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">timerEventDefinition</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">timeDate</span>&gt;</span>2011-03-11T12:13:14<span class="tag">&lt;/<span class="name">timeDate</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">timerEventDefinition</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- timeDuration --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">timerEventDefinition</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">timeDuration</span>&gt;</span>P10D<span class="tag">&lt;/<span class="name">timeDuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">timerEventDefinition</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- timeCycle --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">timerEventDefinition</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">timeCycle</span> <span class="attr">flowable:endDate</span>=<span class="string">&quot;2015-02-25T16:42:11+00:00&quot;</span>&gt;</span>R3/PT10H<span class="tag">&lt;/<span class="name">timeCycle</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">timerEventDefinition</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">timerEventDefinition</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">timeCycle</span>&gt;</span>R3/PT10H/$&#123;EndDate&#125;<span class="tag">&lt;/<span class="name">timeCycle</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">timerEventDefinition</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">timerEventDefinition</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">timeCycle</span>&gt;</span>0 0/5 * * * ?<span class="tag">&lt;/<span class="name">timeCycle</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">timerEventDefinition</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="212-error-event-definitions"><a class="markdownIt-Anchor" href="#212-error-event-definitions"></a> 2.1.2 Error Event Definitions</h3>
<p><strong>Description</strong></p>
<blockquote>
<p>首先，声明一点：<code>BPMN error</code>与<code>Java exception</code>是完全不同的，不能拿来类比。<code>BPMN error</code>仅用于描述业务异常</p>
</blockquote>
<p><strong>XML representation</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">endEvent</span> <span class="attr">id</span>=<span class="string">&quot;myErrorEndEvent&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">errorEventDefinition</span> <span class="attr">errorRef</span>=<span class="string">&quot;myError&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">endEvent</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="213-signal-event-definitions"><a class="markdownIt-Anchor" href="#213-signal-event-definitions"></a> 2.1.3 Signal Event Definitions</h3>
<p><strong>Description</strong></p>
<blockquote>
<p><code>Signal Event</code>指向了一个<code>signal</code>。<code>signal</code>的作用域是全局的</p>
</blockquote>
<p><strong>XML representation</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">definitions...</span> &gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- declaration of the signal --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">signal</span> <span class="attr">id</span>=<span class="string">&quot;alertSignal&quot;</span> <span class="attr">name</span>=<span class="string">&quot;alert&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">process</span> <span class="attr">id</span>=<span class="string">&quot;catchSignal&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">intermediateThrowEvent</span> <span class="attr">id</span>=<span class="string">&quot;throwSignalEvent&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Alert&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- signal event definition --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">signalEventDefinition</span> <span class="attr">signalRef</span>=<span class="string">&quot;alertSignal&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">intermediateThrowEvent</span>&gt;</span></span><br><span class="line">        ...</span><br><span class="line">        <span class="tag">&lt;<span class="name">intermediateCatchEvent</span> <span class="attr">id</span>=<span class="string">&quot;catchSignalEvent&quot;</span> <span class="attr">name</span>=<span class="string">&quot;On Alert&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- signal event definition --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">signalEventDefinition</span> <span class="attr">signalRef</span>=<span class="string">&quot;alertSignal&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">intermediateCatchEvent</span>&gt;</span></span><br><span class="line">        ...</span><br><span class="line">    <span class="tag">&lt;/<span class="name">process</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">definitions</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 我们可以指定signal的作用域（默认是global） --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">signal</span> <span class="attr">id</span>=<span class="string">&quot;alertSignal&quot;</span> <span class="attr">name</span>=<span class="string">&quot;alert&quot;</span> <span class="attr">flowable:scope</span>=<span class="string">&quot;processInstance&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="214-message-event-definitions"><a class="markdownIt-Anchor" href="#214-message-event-definitions"></a> 2.1.4 Message Event Definitions</h3>
<p><strong>Description</strong></p>
<blockquote>
<p><code>Message Event</code>指向了一个<code>message</code>，一个<code>message</code>拥有一个<code>name</code>以及<code>payload</code>。与<code>signal</code>不同，一个<code>message</code>只能有一个<code>receiver</code></p>
</blockquote>
<p><strong>XML representation</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">definitions</span> <span class="attr">id</span>=<span class="string">&quot;definitions&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xmlns</span>=<span class="string">&quot;http://www.omg.org/spec/BPMN/20100524/MODEL&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xmlns:flowable</span>=<span class="string">&quot;http://flowable.org/bpmn&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">targetNamespace</span>=<span class="string">&quot;Examples&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xmlns:tns</span>=<span class="string">&quot;Examples&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">message</span> <span class="attr">id</span>=<span class="string">&quot;newInvoice&quot;</span> <span class="attr">name</span>=<span class="string">&quot;newInvoiceMessage&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">message</span> <span class="attr">id</span>=<span class="string">&quot;payment&quot;</span> <span class="attr">name</span>=<span class="string">&quot;paymentMessage&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">process</span> <span class="attr">id</span>=<span class="string">&quot;invoiceProcess&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">startEvent</span> <span class="attr">id</span>=<span class="string">&quot;messageStart&quot;</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">messageEventDefinition</span> <span class="attr">messageRef</span>=<span class="string">&quot;newInvoice&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">startEvent</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="tag">&lt;<span class="name">intermediateCatchEvent</span> <span class="attr">id</span>=<span class="string">&quot;paymentEvt&quot;</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">messageEventDefinition</span> <span class="attr">messageRef</span>=<span class="string">&quot;payment&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">intermediateCatchEvent</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line">  <span class="tag">&lt;/<span class="name">process</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">definitions</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="22-start-events"><a class="markdownIt-Anchor" href="#22-start-events"></a> 2.2 Start Events</h2>
<p><strong>Description</strong></p>
<blockquote>
<p>顾名思义，<code>start event</code>就是一个<code>process</code>开始的节点，<code>start event</code>的类型定义着<code>process</code>的开始方式<br />
<code>start event</code>永远是<code>catching event</code>，意思是说，<code>start event</code>一直处于wait状态，直到被触发（trigger）</p>
</blockquote>
<p><strong>XML representation</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">startEvent</span> <span class="attr">id</span>=<span class="string">&quot;request&quot;</span> <span class="attr">flowable:initiator</span>=<span class="string">&quot;initiator&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="221-none-start-event"><a class="markdownIt-Anchor" href="#221-none-start-event"></a> 2.2.1 None Start Event</h3>
<p><strong>Description</strong></p>
<blockquote>
<p>从技术上来说，<code>none start event</code>意味着<code>trigger</code>未指定，因此这种<code>process</code>只能手动启动</p>
</blockquote>
<p><strong>XML representation</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">startEvent</span> <span class="attr">id</span>=<span class="string">&quot;start&quot;</span> <span class="attr">name</span>=<span class="string">&quot;my start event&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ProcessInstance processInstance = runtimeService.startProcessInstanceByXXX();</span><br></pre></td></tr></table></figure>
<h3 id="222-timer-start-event"><a class="markdownIt-Anchor" href="#222-timer-start-event"></a> 2.2.2 Timer Start Event</h3>
<p><strong>Description</strong></p>
<blockquote>
<p>顾名思义，<code>timer start event</code>会在指定的时间启动<code>process</code></p>
</blockquote>
<p><strong>XML representation</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">startEvent</span> <span class="attr">id</span>=<span class="string">&quot;theStart&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">timerEventDefinition</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">timeCycle</span>&gt;</span>R4/2011-03-11T12:13/PT5M<span class="tag">&lt;/<span class="name">timeCycle</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">timerEventDefinition</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">startEvent</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">startEvent</span> <span class="attr">id</span>=<span class="string">&quot;theStart&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">timerEventDefinition</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">timeDate</span>&gt;</span>2011-03-11T12:13:14<span class="tag">&lt;/<span class="name">timeDate</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">timerEventDefinition</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">startEvent</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>注意事项</strong></p>
<ol>
<li><code>sub-process</code>不允许含有<code>timer start event</code></li>
<li><code>timer start event</code>在部署时就被<code>scheduler</code>（后台运行一个job，定时启动<code>process</code>）。因此不需要手动启动<code>process</code>（不需要而不是不能）</li>
<li>当一个新版本部署时，旧版本的<code>timer</code>（后台那个job）会被移除</li>
</ol>
<h3 id="223-message-start-event"><a class="markdownIt-Anchor" href="#223-message-start-event"></a> 2.2.3 Message Start Event</h3>
<p><strong>Description</strong></p>
<blockquote>
<p><code>message start event</code>用于启动一个<code>process</code>，一个<code>process definition</code>允许存在多个<code>message start event</code></p>
<ol>
<li>在一个<code>process definition</code>内，<code>message start event</code>的名字必须唯一，否则<code>flowable engine</code>在部署时会抛出异常</li>
<li>不允许不同<code>process definition</code>包含具有相同名字的<code>message start event</code>，否则否则<code>flowable engine</code>在部署时会抛出异常</li>
<li>当部署新版本的<code>process definition</code>时，之前的<code>message</code>订阅关系将会被移除</li>
</ol>
</blockquote>
<p><strong>XML representation</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">definitions</span> <span class="attr">id</span>=<span class="string">&quot;definitions&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xmlns</span>=<span class="string">&quot;http://www.omg.org/spec/BPMN/20100524/MODEL&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xmlns:flowable</span>=<span class="string">&quot;http://flowable.org/bpmn&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">targetNamespace</span>=<span class="string">&quot;Examples&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xmlns:tns</span>=<span class="string">&quot;Examples&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">message</span> <span class="attr">id</span>=<span class="string">&quot;newInvoice&quot;</span> <span class="attr">name</span>=<span class="string">&quot;newInvoiceMessage&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">process</span> <span class="attr">id</span>=<span class="string">&quot;invoiceProcess&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">startEvent</span> <span class="attr">id</span>=<span class="string">&quot;messageStart&quot;</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">messageEventDefinition</span> <span class="attr">messageRef</span>=<span class="string">&quot;tns:newInvoice&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">startEvent</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line">  <span class="tag">&lt;/<span class="name">process</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">definitions</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>注意事项</strong></p>
<ol>
<li><code>message start event</code>仅支持顶层<code>process</code>，即不支持<code>sub-process</code></li>
<li>如果<code>process definition</code>包含多个<code>message start event</code>，那么<code>runtimeService.startProcessInstanceByMessage(…​)</code>会选择适当的<code>message</code>来启动<code>process</code></li>
<li>如果<code>process definition</code>包含多个<code>message start event</code>以及一个<code>none start event</code>，<code>runtimeService.startProcessInstanceByKey(…​)</code>以及<code>runtimeService.startProcessInstanceById(…​)</code>会使用<code>none start event</code>来启动<code>process</code></li>
<li>如果<code>process definition</code>包含多个<code>message start event</code>但不包含<code>none start event</code>，<code>runtimeService.startProcessInstanceByKey(…​)</code>以及<code>runtimeService.startProcessInstanceById(…​)</code>会抛出异常</li>
<li>如果<code>process definition</code>包含一个<code>message start event</code>，那么<code>runtimeService.startProcessInstanceByKey(…​)</code>以及<code>runtimeService.startProcessInstanceById(…​)</code>会使用<code>message start event</code>来启动<code>process</code></li>
</ol>
<h3 id="224-signal-start-event"><a class="markdownIt-Anchor" href="#224-signal-start-event"></a> 2.2.4 Signal Start Event</h3>
<p><strong>Description</strong></p>
<blockquote>
<p><code>signal start event</code>可用于使用命名信号启动<code>process</code>实例。可以使用<code>intermediary signal throw event</code>或通过API（<code>runtimeService.signalEventReceivedXXX</code>方法）从流程实例中触发信号。在这两种情况下，将启动具有相同名称的信号启动事件的所有流程定义</p>
</blockquote>
<p><strong>XML representation</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">signal</span> <span class="attr">id</span>=<span class="string">&quot;theSignal&quot;</span> <span class="attr">name</span>=<span class="string">&quot;The Signal&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">process</span> <span class="attr">id</span>=<span class="string">&quot;processWithSignalStart1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">startEvent</span> <span class="attr">id</span>=<span class="string">&quot;theStart&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">signalEventDefinition</span> <span class="attr">id</span>=<span class="string">&quot;theSignalEventDefinition&quot;</span> <span class="attr">signalRef</span>=<span class="string">&quot;theSignal&quot;</span>  /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">startEvent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;flow1&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;theStart&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;theTask&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">userTask</span> <span class="attr">id</span>=<span class="string">&quot;theTask&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Task in process A&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;flow2&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;theTask&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;theEnd&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">endEvent</span> <span class="attr">id</span>=<span class="string">&quot;theEnd&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">process</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="225-error-start-event"><a class="markdownIt-Anchor" href="#225-error-start-event"></a> 2.2.5 Error Start Event</h3>
<p><strong>Description</strong></p>
<blockquote>
<p><code>error start event</code>可用于触发<code>sub-process</code>。<code>error start event</code>不能用于启动<code>process</code>实例。<code>error start event</code>总是在中断</p>
</blockquote>
<p><strong>XML representation</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">startEvent</span> <span class="attr">id</span>=<span class="string">&quot;messageStart&quot;</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">errorEventDefinition</span> <span class="attr">errorRef</span>=<span class="string">&quot;someError&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">startEvent</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="23-end-events"><a class="markdownIt-Anchor" href="#23-end-events"></a> 2.3 End Events</h2>
<p><code>end event</code>表示<code>process</code>或<code>sub-process</code>的结束。<code>end event</code>一定是<code>throwing event</code>。这意味着当<code>process</code>执行到达<code>end event</code>时，将抛出<code>result</code></p>
<h3 id="231-none-end-event"><a class="markdownIt-Anchor" href="#231-none-end-event"></a> 2.3.1 None End Event</h3>
<p><strong>Description</strong></p>
<blockquote>
<p><code>none end event</code>表示执行动作未定义。因此，除了结束当前的执行的<code>process</code>外，引擎不会做任何额外的事情</p>
</blockquote>
<p><strong>XML representation</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">endEvent</span> <span class="attr">id</span>=<span class="string">&quot;end&quot;</span> <span class="attr">name</span>=<span class="string">&quot;my end event&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="232-error-end-event"><a class="markdownIt-Anchor" href="#232-error-end-event"></a> 2.3.2 Error End Event</h3>
<p><strong>Description</strong></p>
<blockquote>
<p>当<code>process</code>执行到达<code>error end event</code>时，当前执行路径结束并抛出<code>error</code>。匹配的<code>intermediate event</code>或<code>boundary event</code>可以捕获此错误。如果未找到匹配的边界错误事件，则将引发异常</p>
</blockquote>
<p><strong>XML representation</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">endEvent</span> <span class="attr">id</span>=<span class="string">&quot;myErrorEndEvent&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">errorEventDefinition</span> <span class="attr">errorRef</span>=<span class="string">&quot;myError&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">endEvent</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="233-terminate-end-event"><a class="markdownIt-Anchor" href="#233-terminate-end-event"></a> 2.3.3 Terminate End Event</h3>
<p><strong>Description</strong></p>
<blockquote>
<p>到达<code>terminate end event</code>时，将终止当前<code>process</code>实例或<code>sub-process</code>。从概念上讲，当执行到达<code>terminate end event</code>时，将确定并结束第一范围（<code>process</code>或<code>sub-process</code>）。请注意，在<code>BPMN 2.0</code>中，子流程可以是一个<code>embedded sub-process</code>，<code>call activity</code>，<code>event sub-process</code>或<code>transaction sub-process</code>。此规则通常适用：例如，当存在<code>call activity</code>或<code>embedded sub-process</code>时，仅该实例结束，其他实例和流程实例不受影响</p>
</blockquote>
<p><strong>XML representation</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">endEvent</span> <span class="attr">id</span>=<span class="string">&quot;myEndEvent&quot;</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">terminateEventDefinition</span> <span class="attr">flowable:terminateAll</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">terminateEventDefinition</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">endEvent</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="234-cancel-end-event"><a class="markdownIt-Anchor" href="#234-cancel-end-event"></a> 2.3.4 Cancel End Event</h3>
<p><strong>Description</strong></p>
<blockquote>
<p><code>cancel end event</code>只能与BPMN<code>transaction sub-process</code>结合使用。当到达<code>cancel end event</code>时，抛出<code>cancel event</code>，必须由<code>cancel boundary event</code>捕获。<code>cancel boundary event</code>随后取消事务并触发补偿</p>
</blockquote>
<p><strong>XML representation</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">endEvent</span> <span class="attr">id</span>=<span class="string">&quot;myCancelEndEvent&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cancelEventDefinition</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">endEvent</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="24-boundary-events"><a class="markdownIt-Anchor" href="#24-boundary-events"></a> 2.4 Boundary Events</h2>
<p><code>boundary event</code>捕获附加到<code>activity</code>的事件（<code>boundary event</code>一定是<code>catching event</code>）。这意味着当<code>activity</code>正在运行时，事件正在侦听某种类型的<code>trigger</code>。当事件被捕获时，<code>activity</code>被中断并且遵循事件的执行流</p>
<p>文档中说，<code>boundary event</code>不可以有多个<code>output sequence</code>，但实际上是可以的，自行验证一下</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">boundaryEvent</span> <span class="attr">id</span>=<span class="string">&quot;myBoundaryEvent&quot;</span> <span class="attr">attachedToRef</span>=<span class="string">&quot;theActivity&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">XXXEventDefinition</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">boundaryEvent</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="241-timer-boundary-event"><a class="markdownIt-Anchor" href="#241-timer-boundary-event"></a> 2.4.1 Timer Boundary Event</h3>
<p><strong>Description</strong></p>
<blockquote>
<p><code>timer boundary event</code>充当秒表和闹钟。当执行到达附加<code>timer boundary event</code>的<code>activity</code>时，启动计时器。当计时器触发时（例如，在指定的间隔之后），<code>activity</code>被中断并且遵循<code>timer boundary event</code>之外的执行流</p>
</blockquote>
<p><strong>XML representation</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">boundaryEvent</span> <span class="attr">id</span>=<span class="string">&quot;escalationTimer&quot;</span> <span class="attr">cancelActivity</span>=<span class="string">&quot;true&quot;</span> <span class="attr">attachedToRef</span>=<span class="string">&quot;firstLineSupport&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">timerEventDefinition</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">timeDuration</span>&gt;</span>PT4H<span class="tag">&lt;/<span class="name">timeDuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">timerEventDefinition</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">boundaryEvent</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="242-error-boundary-event"><a class="markdownIt-Anchor" href="#242-error-boundary-event"></a> 2.4.2 Error Boundary Event</h3>
<p><strong>Description</strong></p>
<blockquote>
<p><code>error boundary event</code>捕获在定义它的<code>activity</code>范围内引发的<code>error</code></p>
</blockquote>
<p><strong>XML representation</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">boundaryEvent</span> <span class="attr">id</span>=<span class="string">&quot;catchError&quot;</span> <span class="attr">attachedToRef</span>=<span class="string">&quot;mySubProcess&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">errorEventDefinition</span> <span class="attr">errorRef</span>=<span class="string">&quot;myError&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">boundaryEvent</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="243-signal-boundary-event"><a class="markdownIt-Anchor" href="#243-signal-boundary-event"></a> 2.4.3 Signal Boundary Event</h3>
<p><strong>Description</strong></p>
<blockquote>
<p><code>signal boundary event</code>用于捕获指定的<code>signal</code></p>
</blockquote>
<p><strong>XML representation</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">boundaryEvent</span> <span class="attr">id</span>=<span class="string">&quot;boundary&quot;</span> <span class="attr">attachedToRef</span>=<span class="string">&quot;task&quot;</span> <span class="attr">cancelActivity</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">signalEventDefinition</span> <span class="attr">signalRef</span>=<span class="string">&quot;alertSignal&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">boundaryEvent</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="244-message-boundary-event"><a class="markdownIt-Anchor" href="#244-message-boundary-event"></a> 2.4.4 Message Boundary Event</h3>
<p><strong>Description</strong></p>
<blockquote>
<p><code>message boundary event</code>用于捕获指定的<code>message</code></p>
</blockquote>
<p><strong>XML representation</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">boundaryEvent</span> <span class="attr">id</span>=<span class="string">&quot;boundary&quot;</span> <span class="attr">attachedToRef</span>=<span class="string">&quot;task&quot;</span> <span class="attr">cancelActivity</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">messageEventDefinition</span> <span class="attr">messageRef</span>=<span class="string">&quot;newCustomerMessage&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">boundaryEvent</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="245-cancel-boundary-event"><a class="markdownIt-Anchor" href="#245-cancel-boundary-event"></a> 2.4.5 Cancel Boundary Event</h3>
<p><strong>Description</strong></p>
<blockquote>
<p><code>cancel boundary event</code>触发时，它首先中断当前作用域中的所有<code>activity</code>。接下来，它开始补偿事务范围内的所有有效<code>compensation boundary event</code>。补偿是同步进行的，换句话说，<code>boundary event</code>会等待补偿完成后离开事务</p>
</blockquote>
<p><strong>XML representation</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">boundaryEvent</span> <span class="attr">id</span>=<span class="string">&quot;boundary&quot;</span> <span class="attr">attachedToRef</span>=<span class="string">&quot;transaction&quot;</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cancelEventDefinition</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">boundaryEvent</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="246-compensation-boundary-event"><a class="markdownIt-Anchor" href="#246-compensation-boundary-event"></a> 2.4.6 Compensation Boundary Event</h3>
<p><strong>Description</strong></p>
<blockquote>
<p><code>compensation boundary event</code>作为activity的补偿处理过程</p>
</blockquote>
<p><strong>XML representation</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">boundaryEvent</span> <span class="attr">id</span>=<span class="string">&quot;compensateBookHotelEvt&quot;</span> <span class="attr">attachedToRef</span>=<span class="string">&quot;bookHotel&quot;</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">compensateEventDefinition</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">boundaryEvent</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">association</span> <span class="attr">associationDirection</span>=<span class="string">&quot;One&quot;</span> <span class="attr">id</span>=<span class="string">&quot;a1&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">sourceRef</span>=<span class="string">&quot;compensateBookHotelEvt&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;undoBookHotel&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">serviceTask</span> <span class="attr">id</span>=<span class="string">&quot;undoBookHotel&quot;</span> <span class="attr">isForCompensation</span>=<span class="string">&quot;true&quot;</span> <span class="attr">flowable:class</span>=<span class="string">&quot;...&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="25-intermediate-catching-events"><a class="markdownIt-Anchor" href="#25-intermediate-catching-events"></a> 2.5 Intermediate Catching Events</h2>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">intermediateCatchEvent</span> <span class="attr">id</span>=<span class="string">&quot;myIntermediateCatchEvent&quot;</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">XXXEventDefinition</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">intermediateCatchEvent</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="251-timer-intermediate-catching-event"><a class="markdownIt-Anchor" href="#251-timer-intermediate-catching-event"></a> 2.5.1 Timer Intermediate Catching Event</h3>
<p><strong>Description</strong></p>
<blockquote>
<p><code>timer intermediate catching event</code>充当秒表，当<code>process</code>到达<code>timer intermediate catching event</code>时，<code>timer</code>被触发，经过指定时间后，继续后续处理流程</p>
</blockquote>
<p><strong>XML representation</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">intermediateCatchEvent</span> <span class="attr">id</span>=<span class="string">&quot;timer&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">timerEventDefinition</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">timeDuration</span>&gt;</span>PT5M<span class="tag">&lt;/<span class="name">timeDuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">timerEventDefinition</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">intermediateCatchEvent</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="252-signal-intermediate-catching-event"><a class="markdownIt-Anchor" href="#252-signal-intermediate-catching-event"></a> 2.5.2 Signal Intermediate Catching Event</h3>
<p><strong>Description</strong></p>
<blockquote>
<p><code>signal intermediate catching event</code>用于捕获指定的<code>signal</code></p>
</blockquote>
<p><strong>XML representation</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">intermediateCatchEvent</span> <span class="attr">id</span>=<span class="string">&quot;signal&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">signalEventDefinition</span> <span class="attr">signalRef</span>=<span class="string">&quot;newCustomerSignal&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">intermediateCatchEvent</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="253-message-intermediate-catching-event"><a class="markdownIt-Anchor" href="#253-message-intermediate-catching-event"></a> 2.5.3 Message Intermediate Catching Event</h3>
<p><strong>Description</strong></p>
<blockquote>
<p><code>message intermediate catching event</code>用于捕获指定的<code>message</code></p>
</blockquote>
<p><strong>XML representation</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">intermediateCatchEvent</span> <span class="attr">id</span>=<span class="string">&quot;message&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">messageEventDefinition</span> <span class="attr">signalRef</span>=<span class="string">&quot;newCustomerMessage&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">intermediateCatchEvent</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="26-intermediate-throwing-event"><a class="markdownIt-Anchor" href="#26-intermediate-throwing-event"></a> 2.6 Intermediate Throwing Event</h2>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">intermediateThrowEvent</span> <span class="attr">id</span>=<span class="string">&quot;myIntermediateThrowEvent&quot;</span> &gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">XXXEventDefinition</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">intermediateThrowEvent</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="261-intermediate-throwing-none-event"><a class="markdownIt-Anchor" href="#261-intermediate-throwing-none-event"></a> 2.6.1 Intermediate Throwing None Event</h3>
<p><strong>Description</strong></p>
<blockquote>
<p><code>intermediate throwing none event</code>通常用来表示<code>process</code>到达某种状态</p>
</blockquote>
<p><strong>XML representation</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">intermediateThrowEvent</span> <span class="attr">id</span>=<span class="string">&quot;noneEvent&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">extensionElements</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">flowable:executionListener</span> <span class="attr">class</span>=<span class="string">&quot;org.flowable.engine.test.bpmn.event.IntermediateNoneEventTest$MyExecutionListener&quot;</span> <span class="attr">event</span>=<span class="string">&quot;start&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">extensionElements</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">intermediateThrowEvent</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="262-signal-intermediate-throwing-event"><a class="markdownIt-Anchor" href="#262-signal-intermediate-throwing-event"></a> 2.6.2 Signal Intermediate Throwing Event</h3>
<p><strong>Description</strong></p>
<blockquote>
<p><code>signal intermediate throwing event</code>抛出一个<code>signal</code></p>
</blockquote>
<p><strong>XML representation</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">intermediateThrowEvent</span> <span class="attr">id</span>=<span class="string">&quot;signal&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">signalEventDefinition</span> <span class="attr">signalRef</span>=<span class="string">&quot;newCustomerSignal&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">intermediateThrowEvent</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- async mode --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">intermediateThrowEvent</span> <span class="attr">id</span>=<span class="string">&quot;signal&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">signalEventDefinition</span> <span class="attr">signalRef</span>=<span class="string">&quot;newCustomerSignal&quot;</span> <span class="attr">flowable:async</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">intermediateThrowEvent</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="263-compensation-intermediate-throwing-event"><a class="markdownIt-Anchor" href="#263-compensation-intermediate-throwing-event"></a> 2.6.3 Compensation Intermediate Throwing Event</h3>
<p><strong>Description</strong></p>
<blockquote>
<p><code>compensation intermediate throwing event</code>抛出<code>compensation event</code>来触发<code>compensation</code></p>
</blockquote>
<p><strong>XML representation</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">intermediateThrowEvent</span> <span class="attr">id</span>=<span class="string">&quot;throwCompensation&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">compensateEventDefinition</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">intermediateThrowEvent</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">intermediateThrowEvent</span> <span class="attr">id</span>=<span class="string">&quot;throwCompensation&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">compensateEventDefinition</span> <span class="attr">activityRef</span>=<span class="string">&quot;bookHotel&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">intermediateThrowEvent</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="3-sequence-flow"><a class="markdownIt-Anchor" href="#3-sequence-flow"></a> 3 Sequence Flow</h1>
<p><code>sequence flow</code>用于表示两个<code>process</code>元素的连接关系（路由关系，带有方向）。<strong>当<code>process</code>执行到某个节点时，<code>所有</code>通过<code>sequence flow</code>连接出去的路径都会被同时执行，也就是并发的两条/多条执行链路。这是<code>BPMN 2.0</code>的默认行为（相当于默认有一个<code>parallel gateway</code>）</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;flow1&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;theStart&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;theTask&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>参考</strong></p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.flowable.org/docs/userguide/index.html#bpmnSequenceFlow">Sequence Flow</a></li>
</ul>
<h2 id="31-conditional-sequence-flow"><a class="markdownIt-Anchor" href="#31-conditional-sequence-flow"></a> 3.1 Conditional sequence flow</h2>
<p><strong>Description</strong></p>
<blockquote>
<p>顾名思义，<code>conditional sequence flow</code>允许附带一个条件。条件为真时，继续执行当前路径的后续流程，否则终止当前路径</p>
</blockquote>
<p><strong>XML representation</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- conditionExpression仅支持 UEL --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 且表达式的值必须是bool值，否则会抛出异常 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;flow&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;theStart&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;theTask&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">conditionExpression</span> <span class="attr">xsi:type</span>=<span class="string">&quot;tFormalExpression&quot;</span>&gt;</span></span><br><span class="line">    &lt;![CDATA[$&#123;order.price &gt; 100 &amp;&amp; order.price &lt; 250&#125;]]&gt;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">conditionExpression</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">sequenceFlow</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="32-default-sequence-flow"><a class="markdownIt-Anchor" href="#32-default-sequence-flow"></a> 3.2 Default sequence flow</h2>
<p><strong>Description</strong></p>
<blockquote>
<p><code>default sequence flow</code>当且仅当当前节点的其他<code>sequence flow</code>没有被触发时才会生效，起到一个默认路由的作用</p>
</blockquote>
<p><strong>XML representation</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- The following XML snippet shows an example of an exclusive gateway that has as default sequence flow, flow 2. Only when conditionA and conditionB both evaluate to false, will it be chosen as the outgoing sequence flow for the gateway. --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">exclusiveGateway</span> <span class="attr">id</span>=<span class="string">&quot;exclusiveGw&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Exclusive Gateway&quot;</span> <span class="attr">default</span>=<span class="string">&quot;flow2&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;flow1&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;exclusiveGw&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;task1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">conditionExpression</span> <span class="attr">xsi:type</span>=<span class="string">&quot;tFormalExpression&quot;</span>&gt;</span>$&#123;conditionA&#125;<span class="tag">&lt;/<span class="name">conditionExpression</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">sequenceFlow</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;flow2&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;exclusiveGw&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;task2&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;flow3&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;exclusiveGw&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;task3&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">conditionExpression</span> <span class="attr">xsi:type</span>=<span class="string">&quot;tFormalExpression&quot;</span>&gt;</span>$&#123;conditionB&#125;<span class="tag">&lt;/<span class="name">conditionExpression</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">sequenceFlow</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="4-gateway"><a class="markdownIt-Anchor" href="#4-gateway"></a> 4 Gateway</h1>
<p><code>gateway</code>用于控制<code>process</code>的执行流。抽象地来说，<code>gateway</code>能够使用或者消耗<code>token</code></p>
<p><strong>参考</strong></p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.flowable.org/docs/userguide/index.html#bpmnGateways">Gateway</a></li>
</ul>
<h2 id="41-exclusive-gateway"><a class="markdownIt-Anchor" href="#41-exclusive-gateway"></a> 4.1 Exclusive Gateway</h2>
<p><strong>Description</strong></p>
<blockquote>
<p><code>exclusive gateway</code>又被称为<code>XOR gateway</code>，通常用于描述<code>decision</code>。当流程执行到<code>exclusive gateway</code>时，所有的<code>sequence flow</code>会按照定义的顺序进行条件判断（针对<code>conditional sequence flow</code>，<code>sequence flow</code>也可以看成一个条件永远为真的<code>conditional sequence flow</code>）。第一个为真的<code>conditional sequence flow</code>将会被选中并继续执行后续流程，其余<code>sequence flow</code>被忽略。全都为假时，将会抛出异常</p>
</blockquote>
<p><strong>XML representation</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">exclusiveGateway</span> <span class="attr">id</span>=<span class="string">&quot;exclusiveGw&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Exclusive Gateway&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;flow2&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;exclusiveGw&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;theTask1&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">conditionExpression</span> <span class="attr">xsi:type</span>=<span class="string">&quot;tFormalExpression&quot;</span>&gt;</span>$&#123;input == 1&#125;<span class="tag">&lt;/<span class="name">conditionExpression</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">sequenceFlow</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;flow3&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;exclusiveGw&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;theTask2&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">conditionExpression</span> <span class="attr">xsi:type</span>=<span class="string">&quot;tFormalExpression&quot;</span>&gt;</span>$&#123;input == 2&#125;<span class="tag">&lt;/<span class="name">conditionExpression</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">sequenceFlow</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;flow4&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;exclusiveGw&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;theTask3&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">conditionExpression</span> <span class="attr">xsi:type</span>=<span class="string">&quot;tFormalExpression&quot;</span>&gt;</span>$&#123;input == 3&#125;<span class="tag">&lt;/<span class="name">conditionExpression</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">sequenceFlow</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="42-parallel-gateway"><a class="markdownIt-Anchor" href="#42-parallel-gateway"></a> 4.2 Parallel Gateway</h2>
<p><strong>Description</strong></p>
<blockquote>
<p><code>parallel gateway</code>通常用于描述并发执行流，最直接最方便的引入并发特性的元素就是<code>parallel gateway</code>。<code>parallel gateway</code>可以起到<code>fork</code>的作用（从一条路径到多条路径），以及<code>join</code>的作用（从多条执行路径到一条执行路径），这取决于<code>parallel gateway</code>放置的位置<br />
要注意的是，与<code>parallel gateway</code>相连的<code>sequence flow</code>若是<code>conditional sequence flow</code>，则条件的校验将会被直接忽略</p>
</blockquote>
<p><strong>XML representation</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">startEvent</span> <span class="attr">id</span>=<span class="string">&quot;theStart&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;flow1&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;theStart&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;fork&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">parallelGateway</span> <span class="attr">id</span>=<span class="string">&quot;fork&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">sourceRef</span>=<span class="string">&quot;fork&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;receivePayment&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">sourceRef</span>=<span class="string">&quot;fork&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;shipOrder&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">userTask</span> <span class="attr">id</span>=<span class="string">&quot;receivePayment&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Receive Payment&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">sourceRef</span>=<span class="string">&quot;receivePayment&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;join&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">userTask</span> <span class="attr">id</span>=<span class="string">&quot;shipOrder&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Ship Order&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">sourceRef</span>=<span class="string">&quot;shipOrder&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;join&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">parallelGateway</span> <span class="attr">id</span>=<span class="string">&quot;join&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">sourceRef</span>=<span class="string">&quot;join&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;archiveOrder&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">userTask</span> <span class="attr">id</span>=<span class="string">&quot;archiveOrder&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Archive Order&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">sourceRef</span>=<span class="string">&quot;archiveOrder&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;theEnd&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">endEvent</span> <span class="attr">id</span>=<span class="string">&quot;theEnd&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="43-inclusive-gateway"><a class="markdownIt-Anchor" href="#43-inclusive-gateway"></a> 4.3 Inclusive Gateway</h2>
<p><strong>Description</strong></p>
<blockquote>
<p><code>inclusive gateway</code>可以看成是<code>exclusive gateway</code>以及<code>parallel gateway</code>的结合体。与<code>exclusive gateway</code>类似，<code>inclusive gateway</code>会执行<code>conditional sequence flow</code>上的条件；与<code>parallel gateway</code>类似，<code>inclusive gateway</code>同样允许<code>fork</code>以及<code>join</code></p>
</blockquote>
<p><strong>XML representation</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">startEvent</span> <span class="attr">id</span>=<span class="string">&quot;theStart&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">id</span>=<span class="string">&quot;flow1&quot;</span> <span class="attr">sourceRef</span>=<span class="string">&quot;theStart&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;fork&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">inclusiveGateway</span> <span class="attr">id</span>=<span class="string">&quot;fork&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">sourceRef</span>=<span class="string">&quot;fork&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;receivePayment&quot;</span> &gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">conditionExpression</span> <span class="attr">xsi:type</span>=<span class="string">&quot;tFormalExpression&quot;</span>&gt;</span>$&#123;paymentReceived == false&#125;<span class="tag">&lt;/<span class="name">conditionExpression</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">sequenceFlow</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">sourceRef</span>=<span class="string">&quot;fork&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;shipOrder&quot;</span> &gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">conditionExpression</span> <span class="attr">xsi:type</span>=<span class="string">&quot;tFormalExpression&quot;</span>&gt;</span>$&#123;shipOrder == true&#125;<span class="tag">&lt;/<span class="name">conditionExpression</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">sequenceFlow</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">userTask</span> <span class="attr">id</span>=<span class="string">&quot;receivePayment&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Receive Payment&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">sourceRef</span>=<span class="string">&quot;receivePayment&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;join&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">userTask</span> <span class="attr">id</span>=<span class="string">&quot;shipOrder&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Ship Order&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">sourceRef</span>=<span class="string">&quot;shipOrder&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;join&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">inclusiveGateway</span> <span class="attr">id</span>=<span class="string">&quot;join&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">sourceRef</span>=<span class="string">&quot;join&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;archiveOrder&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">userTask</span> <span class="attr">id</span>=<span class="string">&quot;archiveOrder&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Archive Order&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">sourceRef</span>=<span class="string">&quot;archiveOrder&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;theEnd&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">endEvent</span> <span class="attr">id</span>=<span class="string">&quot;theEnd&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="5-task"><a class="markdownIt-Anchor" href="#5-task"></a> 5 Task</h1>
<h2 id="51-user-task"><a class="markdownIt-Anchor" href="#51-user-task"></a> 5.1 User Task</h2>
<p><strong>Description</strong></p>
<blockquote>
<p><code>user task</code>用于描述人类需要完成的工作。当流程执行到此类任务时，将在分配给该任务的任何用户或组的任务列表中创建新任务</p>
</blockquote>
<p><strong>XML representation</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- normal --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">userTask</span> <span class="attr">id</span>=<span class="string">&quot;theTask&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Important task&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- documentation --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">userTask</span> <span class="attr">id</span>=<span class="string">&quot;theTask&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Schedule meeting&quot;</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">documentation</span>&gt;</span></span><br><span class="line">        Schedule an engineering meeting for next week with the new hire.</span><br><span class="line">    <span class="tag">&lt;/<span class="name">documentation</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">userTask</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- due date --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">userTask</span> <span class="attr">id</span>=<span class="string">&quot;theTask&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Important task&quot;</span> <span class="attr">flowable:dueDate</span>=<span class="string">&quot;$&#123;dateVariable&#125;&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- user assignment --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">userTask</span> <span class="attr">id</span>=<span class="string">&#x27;theTask&#x27;</span> <span class="attr">name</span>=<span class="string">&#x27;important task&#x27;</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">humanPerformer</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resourceAssignmentExpression</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">formalExpression</span>&gt;</span>kermit<span class="tag">&lt;/<span class="name">formalExpression</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resourceAssignmentExpression</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">humanPerformer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">userTask</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- candidate user assignment --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- If no specifics are given as to whether the given text string is a user or group, the engine defaults to group --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">userTask</span> <span class="attr">id</span>=<span class="string">&#x27;theTask&#x27;</span> <span class="attr">name</span>=<span class="string">&#x27;important task&#x27;</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">potentialOwner</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resourceAssignmentExpression</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">formalExpression</span>&gt;</span>user(kermit), group(management)<span class="tag">&lt;/<span class="name">formalExpression</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resourceAssignmentExpression</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">potentialOwner</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">userTask</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- more flexible way --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">userTask</span> <span class="attr">id</span>=<span class="string">&quot;theTask&quot;</span> <span class="attr">name</span>=<span class="string">&quot;my task&quot;</span> <span class="attr">flowable:assignee</span>=<span class="string">&quot;kermit&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">userTask</span> <span class="attr">id</span>=<span class="string">&quot;theTask&quot;</span> <span class="attr">name</span>=<span class="string">&quot;my task&quot;</span> <span class="attr">flowable:candidateUsers</span>=<span class="string">&quot;kermit, gonzo&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">userTask</span> <span class="attr">id</span>=<span class="string">&quot;theTask&quot;</span> <span class="attr">name</span>=<span class="string">&quot;my task&quot;</span> <span class="attr">flowable:candidateGroups</span>=<span class="string">&quot;management, accountancy&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">userTask</span> <span class="attr">id</span>=<span class="string">&quot;theTask&quot;</span> <span class="attr">name</span>=<span class="string">&quot;my task&quot;</span> <span class="attr">flowable:candidateUsers</span>=<span class="string">&quot;kermit, gonzo&quot;</span> <span class="attr">flowable:candidateGroups</span>=<span class="string">&quot;management, accountancy&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>参考</strong></p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.flowable.org/docs/userguide/index.html#bpmnUserTask">User Task</a></li>
</ul>
<h2 id="52-script-task"><a class="markdownIt-Anchor" href="#52-script-task"></a> 5.2 Script Task</h2>
<p><strong>Description</strong></p>
<blockquote>
<p><code>script task</code>是一个自动的<code>activity</code>，当一个<code>process</code>执行到<code>script task</code>时，相关联的<code>script</code>就会被执行</p>
</blockquote>
<p><strong>XML representation</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">scriptTask</span> <span class="attr">id</span>=<span class="string">&quot;theScriptTask&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Execute script&quot;</span> <span class="attr">scriptFormat</span>=<span class="string">&quot;groovy&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line">        sum = 0</span><br><span class="line">        for ( i in inputArray ) &#123;</span><br><span class="line">            sum += i</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">scriptTask</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- variable store --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- default value of autoStoreVariables is false --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scriptTask</span> <span class="attr">id</span>=<span class="string">&quot;script&quot;</span> <span class="attr">scriptFormat</span>=<span class="string">&quot;JavaScript&quot;</span> <span class="attr">flowable:autoStoreVariables</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">        def scriptVar = <span class="string">&quot;test123&quot;</span></span></span><br><span class="line"><span class="javascript">        execution.setVariable(<span class="string">&quot;myVar&quot;</span>, scriptVar)</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">scriptTask</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- script result store --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- In the following example, the result of the script execution (the value of the resolved expression &#x27;#&#123;echo&#125;&#x27;) is set to the process variable named &#x27;myVar&#x27; after the script completes. --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scriptTask</span> <span class="attr">id</span>=<span class="string">&quot;theScriptTask&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Execute script&quot;</span> <span class="attr">scriptFormat</span>=<span class="string">&quot;juel&quot;</span> <span class="attr">flowable:resultVariable</span>=<span class="string">&quot;myVar&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span>#&#123;echo&#125;<span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">scriptTask</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>以下名称是保留字符，不可用于变量名</strong></p>
<ol>
<li><code>out</code></li>
<li><code>out:print</code></li>
<li><code>lang:import</code></li>
<li><code>context</code></li>
<li><code>elcontext</code></li>
</ol>
<p><strong>参考</strong></p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.flowable.org/docs/userguide/index.html#bpmnScriptTask">Script Task</a></li>
</ul>
<h2 id="53-java-service-task"><a class="markdownIt-Anchor" href="#53-java-service-task"></a> 5.3 Java Service Task</h2>
<p><strong>Description</strong></p>
<blockquote>
<p><code>java service task</code>用于触发一个Java方法</p>
</blockquote>
<p><strong>XML representation</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- normal --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">serviceTask</span> <span class="attr">id</span>=<span class="string">&quot;javaService&quot;</span></span></span><br><span class="line"><span class="tag">             <span class="attr">name</span>=<span class="string">&quot;My Java Service Task&quot;</span></span></span><br><span class="line"><span class="tag">             <span class="attr">flowable:class</span>=<span class="string">&quot;org.flowable.MyJavaDelegate&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- delegate to bean --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- the delegateExpressionBean is a bean that implements the JavaDelegate interface, defined in, for example, the Spring container --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">serviceTask</span> <span class="attr">id</span>=<span class="string">&quot;serviceTask&quot;</span> <span class="attr">flowable:delegateExpression</span>=<span class="string">&quot;$&#123;delegateExpressionBean&#125;&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- UEL(Unified Expression Language) method expression --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">serviceTask</span> <span class="attr">id</span>=<span class="string">&quot;javaService&quot;</span></span></span><br><span class="line"><span class="tag">             <span class="attr">name</span>=<span class="string">&quot;My Java Service Task&quot;</span></span></span><br><span class="line"><span class="tag">             <span class="attr">flowable:expression</span>=<span class="string">&quot;#&#123;printer.printMessage()&#125;&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Field Injected --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">serviceTask</span> <span class="attr">id</span>=<span class="string">&quot;javaService&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">name</span>=<span class="string">&quot;Java service invocation&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">flowable:class</span>=<span class="string">&quot;org.flowable.examples.bpmn.servicetask.ToUpperCaseFieldInjected&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">extensionElements</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">flowable:field</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span> <span class="attr">stringValue</span>=<span class="string">&quot;Hello World&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">extensionElements</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">serviceTask</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>Implementation</strong></p>
<ol>
<li>必须实现<code>org.flowable.engine.delegate.JavaDelegate</code>的<code>execute</code>方法</li>
<li>所有<code>process</code>的实例共享同一个<code>JavaDelegate</code>的实例，因此这个类的实现必须是线程安全的（最好无状态）</li>
<li>当第一次被使用时，才会创建<code>JavaDelegate</code>的实例</li>
</ol>
<p><strong>Field Injection</strong></p>
<ol>
<li>通常，会通过setter方法来为<code>delegated class</code>注入属性值（超级无敌神坑：若写的是private的字段，而没有提供public的set方法，有时候注入会失败）</li>
<li><strong>字段类型必须是<code>org.flowable.engine.delegate.Expression</code></strong></li>
</ol>
<p><strong>Using a Flowable service from within a JavaDelegate</strong></p>
<ol>
<li><code>RuntimeService runtimeService = Context.getProcessEngineConfiguration().getRuntimeService();</code></li>
<li>…</li>
</ol>
<p><strong>参考</strong></p>
<ul>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/javaee/5/tutorial/doc/bnahq.html">UEL（Unified Expression Language）</a></li>
<li><a target="_blank" rel="noopener" href="https://www.flowable.org/docs/userguide/index.html#bpmnJavaServiceTask">Java Service Task</a></li>
</ul>
<h2 id="54-web-service-task"><a class="markdownIt-Anchor" href="#54-web-service-task"></a> 5.4 Web Service Task</h2>
<p><strong>Description</strong></p>
<blockquote>
<p><code>web service task</code>用于同步地触发一个外部的Web service</p>
</blockquote>
<p><strong>参考</strong></p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.flowable.org/docs/userguide/index.html#bpmnWebserviceTask">Web Service Task</a></li>
</ul>
<h2 id="55-business-rule-task"><a class="markdownIt-Anchor" href="#55-business-rule-task"></a> 5.5 Business Rule Task</h2>
<p><strong>Description</strong></p>
<blockquote>
<p><code>business rule task</code>用于同步地执行一个或多个rule。<code>Flowable</code>使用<code>Drools Rule Engine</code>来执行具体的rule</p>
</blockquote>
<p><strong>参考</strong></p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.flowable.org/docs/userguide/index.html#bpmnBusinessRuleTask">Business Rule Task</a></li>
</ul>
<h2 id="56-email-task"><a class="markdownIt-Anchor" href="#56-email-task"></a> 5.6 Email Task</h2>
<p><strong>Description</strong></p>
<blockquote>
<p>Flowable允许您使用向一个或多个收件人发送电子邮件的自动邮件服务任务来增强业务流程</p>
</blockquote>
<p><strong>XML representation</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">serviceTask</span> <span class="attr">id</span>=<span class="string">&quot;sendMail&quot;</span> <span class="attr">flowable:type</span>=<span class="string">&quot;mail&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">extensionElements</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">flowable:field</span> <span class="attr">name</span>=<span class="string">&quot;from&quot;</span> <span class="attr">stringValue</span>=<span class="string">&quot;order-shipping@thecompany.com&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">flowable:field</span> <span class="attr">name</span>=<span class="string">&quot;to&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;$&#123;recipient&#125;&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">flowable:field</span> <span class="attr">name</span>=<span class="string">&quot;subject&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;Your order $&#123;orderId&#125; has been shipped&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">flowable:field</span> <span class="attr">name</span>=<span class="string">&quot;html&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">flowable:expression</span>&gt;</span></span><br><span class="line">                &lt;![CDATA[</span><br><span class="line">                    &lt;html&gt;</span><br><span class="line">                        &lt;body&gt;</span><br><span class="line">                            Hello $&#123;male ? &#x27;Mr.&#x27; : &#x27;Mrs.&#x27; &#125; $&#123;recipientName&#125;,&lt;br/&gt;&lt;br/&gt;</span><br><span class="line"></span><br><span class="line">                            As of $&#123;now&#125;, your order has been &lt;b&gt;processed and shipped&lt;/b&gt;.&lt;br/&gt;&lt;br/&gt;</span><br><span class="line"></span><br><span class="line">                            Kind regards,&lt;br/&gt;</span><br><span class="line"></span><br><span class="line">                            TheCompany.</span><br><span class="line">                        &lt;/body&gt;</span><br><span class="line">                    &lt;/html&gt;</span><br><span class="line">                ]]&gt;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">flowable:expression</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">flowable:field</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">extensionElements</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">serviceTask</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>参考</strong></p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.flowable.org/docs/userguide/index.html#bpmnEmailTask">Email Task</a></li>
</ul>
<h2 id="57-http-task"><a class="markdownIt-Anchor" href="#57-http-task"></a> 5.7 Http Task</h2>
<p><strong>Description</strong></p>
<blockquote>
<p><code>http task</code>允许发出HTTP请求，增强了<code>Flowable</code>的集成功能。请注意，<code>http task</code>不是<code>BPMN 2.0</code>规范的官方任务（因此没有专用图标）。因此，在Flowable中，<code>http task</code>被实现为专用服务任务</p>
</blockquote>
<p><strong>XML representation</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">serviceTask</span> <span class="attr">id</span>=<span class="string">&quot;httpGet&quot;</span> <span class="attr">flowable:type</span>=<span class="string">&quot;http&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">extensionElements</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">flowable:field</span> <span class="attr">name</span>=<span class="string">&quot;requestMethod&quot;</span> <span class="attr">stringValue</span>=<span class="string">&quot;GET&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">flowable:field</span> <span class="attr">name</span>=<span class="string">&quot;requestUrl&quot;</span> <span class="attr">stringValue</span>=<span class="string">&quot;http://flowable.org&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">flowable:field</span> <span class="attr">name</span>=<span class="string">&quot;requestHeaders&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">flowable:expression</span>&gt;</span></span><br><span class="line">                &lt;![CDATA[</span><br><span class="line">                Accept: text/html</span><br><span class="line">                Cache-Control: no-cache</span><br><span class="line">                ]]&gt;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">flowable:expression</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">flowable:field</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">flowable:field</span> <span class="attr">name</span>=<span class="string">&quot;requestTimeout&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">flowable:expression</span>&gt;</span></span><br><span class="line">                &lt;![CDATA[</span><br><span class="line">                $&#123;requestTimeout&#125;</span><br><span class="line">                ]]&gt;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">flowable:expression</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">flowable:field</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">flowable:field</span> <span class="attr">name</span>=<span class="string">&quot;resultVariablePrefix&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">flowable:string</span>&gt;</span>task7<span class="tag">&lt;/<span class="name">flowable:string</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">flowable:field</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">extensionElements</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">serviceTask</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>参考</strong></p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.flowable.org/docs/userguide/index.html#bpmnHttpTask">Http Task</a></li>
</ul>
<h2 id="58-mule-task"><a class="markdownIt-Anchor" href="#58-mule-task"></a> 5.8 Mule Task</h2>
<p><strong>Description</strong></p>
<blockquote>
<p><code>mule task</code>允许您向Mule发送消息，增强Flowable的集成功能。请注意，Mule任务不是<code>BPMN 2.0</code>规范的官方任务（因此没有专用图标）。因此，在<code>Flowable</code>中，<code>mule task</code>任务被实现为专用服务任务</p>
</blockquote>
<p><strong>参考</strong></p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.flowable.org/docs/userguide/index.html#bpmnMuleTask">Mule Task</a></li>
</ul>
<h2 id="59-camel-task"><a class="markdownIt-Anchor" href="#59-camel-task"></a> 5.9 Camel Task</h2>
<p><strong>Description</strong></p>
<blockquote>
<p><code>camel task</code>允许您向<code>Camel</code>发送消息和从<code>Camel</code>接收消息，从而增强Flowable的集成功能。请注意，<code>camel task</code>不是<code>BPMN 2.0</code>规范的官方任务（因此没有专用图标）。因此，在<code>Flowable</code>中，<code>Camel</code>任务被实现为专用服务任务。另请注意，必须在项目中包含<code>Flowable Camel</code>模块才能使用<code>Camel</code>任务功能</p>
</blockquote>
<p><strong>参考</strong></p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.flowable.org/docs/userguide/index.html#bpmnCamelTask">Camel Task</a></li>
</ul>
<h2 id="510-manual-task"><a class="markdownIt-Anchor" href="#510-manual-task"></a> 5.10 Manual Task</h2>
<p><strong>Description</strong></p>
<blockquote>
<p><code>manual task</code>定义BPM引擎外部的任务。它用于模拟由某人完成的工作，引擎不需要知道，也没有系统或用户界面。对于引擎，手动任务作为传递活动处理，从流程执行到达时自动继续流程</p>
</blockquote>
<p><strong>XML representation</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">manualTask</span> <span class="attr">id</span>=<span class="string">&quot;myManualTask&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Call client for more information&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>参考</strong></p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.flowable.org/docs/userguide/index.html#bpmnManualTask">Manual Task</a></li>
</ul>
<h2 id="511-java-receive-task"><a class="markdownIt-Anchor" href="#511-java-receive-task"></a> 5.11 Java Receive Task</h2>
<p><strong>Description</strong></p>
<blockquote>
<p><code>java receuve task</code>务是一个等待某个消息到达的简单任务。目前，我们只为此任务实现了Java语义。当<code>process</code>执行到达接收任务时，<code>process</code>状态将提交给持久性存储。这意味着<code>process</code>将保持此等待状态，直到引擎接收到特定消息，进而触发<code>java receuve task</code>，继续执行<code>process</code></p>
</blockquote>
<p><strong>XML representation</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">receiveTask</span> <span class="attr">id</span>=<span class="string">&quot;waitState&quot;</span> <span class="attr">name</span>=<span class="string">&quot;wait&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>参考</strong></p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.flowable.org/docs/userguide/index.html#bpmnReceiveTask">Java Receive Task</a></li>
</ul>
<h2 id="512-shell-task"><a class="markdownIt-Anchor" href="#512-shell-task"></a> 5.12 Shell Task</h2>
<p><strong>Description</strong></p>
<blockquote>
<p><code>shell task</code>允许您运行shell脚本和命令。请注意，<code>shell task</code>不是<code>BPMN 2.0</code>规范的官方任务（因此没有专用图标）</p>
</blockquote>
<p><strong>XML representation</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- cmd /c echo EchoTest --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">serviceTask</span> <span class="attr">id</span>=<span class="string">&quot;shellEcho&quot;</span> <span class="attr">flowable:type</span>=<span class="string">&quot;shell&quot;</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">extensionElements</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">flowable:field</span> <span class="attr">name</span>=<span class="string">&quot;command&quot;</span> <span class="attr">stringValue</span>=<span class="string">&quot;cmd&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">flowable:field</span> <span class="attr">name</span>=<span class="string">&quot;arg1&quot;</span> <span class="attr">stringValue</span>=<span class="string">&quot;/c&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">flowable:field</span> <span class="attr">name</span>=<span class="string">&quot;arg2&quot;</span> <span class="attr">stringValue</span>=<span class="string">&quot;echo&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">flowable:field</span> <span class="attr">name</span>=<span class="string">&quot;arg3&quot;</span> <span class="attr">stringValue</span>=<span class="string">&quot;EchoTest&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">flowable:field</span> <span class="attr">name</span>=<span class="string">&quot;wait&quot;</span> <span class="attr">stringValue</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">flowable:field</span> <span class="attr">name</span>=<span class="string">&quot;outputVariable&quot;</span> <span class="attr">stringValue</span>=<span class="string">&quot;resultVar&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">extensionElements</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">serviceTask</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>参考</strong></p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.flowable.org/docs/userguide/index.html#bpmnShellTask">Shell Task</a></li>
</ul>
<h2 id="513-execution-listener"><a class="markdownIt-Anchor" href="#513-execution-listener"></a> 5.13 Execution listener</h2>
<p><strong>Description</strong></p>
<blockquote>
<p><code>execution listener</code>允许您在流程执行期间发生某些事件时执行外部Java代码或计算表达式。可以捕获的事件是：</p>
<ol>
<li>启动或停止<code>process</code></li>
<li>进行转移，即<code>sequence flow</code></li>
<li>启动或停止<code>activity</code></li>
<li>启动或停止<code>gateway</code></li>
<li>启动或停止<code>intermediate event</code></li>
<li>结束<code>start event</code>或启动<code>end event</code></li>
</ol>
</blockquote>
<p><strong>示例</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">process</span> <span class="attr">id</span>=<span class="string">&quot;executionListenersProcess&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 第一个Listener --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 在process的启动时触发Listener --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">extensionElements</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">flowable:executionListener</span></span></span><br><span class="line"><span class="tag">            <span class="attr">class</span>=<span class="string">&quot;org.flowable.examples.bpmn.executionlistener.ExampleExecutionListenerOne&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">event</span>=<span class="string">&quot;start&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">extensionElements</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">startEvent</span> <span class="attr">id</span>=<span class="string">&quot;theStart&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">sourceRef</span>=<span class="string">&quot;theStart&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;firstTask&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">userTask</span> <span class="attr">id</span>=<span class="string">&quot;firstTask&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 第二个Listener --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 在进行转移时触发Listener --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">sourceRef</span>=<span class="string">&quot;firstTask&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;secondTask&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extensionElements</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">flowable:executionListener</span></span></span><br><span class="line"><span class="tag">                <span class="attr">class</span>=<span class="string">&quot;org.flowable.examples.bpmn.executionListener.ExampleExecutionListenerTwo&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">extensionElements</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">sequenceFlow</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 第一个Listener --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 在userTask结束时触发Listener --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">userTask</span> <span class="attr">id</span>=<span class="string">&quot;secondTask&quot;</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">extensionElements</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">flowable:executionListener</span></span></span><br><span class="line"><span class="tag">                <span class="attr">expression</span>=<span class="string">&quot;$&#123;myPojo.myMethod(execution.event)&#125;&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">event</span>=<span class="string">&quot;end&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">extensionElements</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">userTask</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">sourceRef</span>=<span class="string">&quot;secondTask&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;thirdTask&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">userTask</span> <span class="attr">id</span>=<span class="string">&quot;thirdTask&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sequenceFlow</span> <span class="attr">sourceRef</span>=<span class="string">&quot;thirdTask&quot;</span> <span class="attr">targetRef</span>=<span class="string">&quot;theEnd&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">endEvent</span> <span class="attr">id</span>=<span class="string">&quot;theEnd&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">process</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>需要实现的接口：<code>org.flowable.engine.delegate.ExecutionListener</code></strong></p>
<p><strong>参考</strong></p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.flowable.org/docs/userguide/index.html#executionListeners">Execution listener</a></li>
</ul>
<h2 id="514-task-listener"><a class="markdownIt-Anchor" href="#514-task-listener"></a> 5.14 Task listener</h2>
<p><strong>Description</strong></p>
<blockquote>
<p><code>task listener</code>用于在发生某个与任务相关的事件时执行自定义Java逻辑或表达式。<strong><code>task listener</code>只能作为<code>user task</code>的子元素添加到流程定义中</strong>。请注意，这也必须作为<code>BPMN 2.0</code>的<code>extensionElements</code>子元素或<code>flowable namespace</code>，因为<code>task listener</code>是<code>Flowable</code>特定的构造</p>
</blockquote>
<p><strong>XML representation</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">userTask</span> <span class="attr">id</span>=<span class="string">&quot;myTask&quot;</span> <span class="attr">name</span>=<span class="string">&quot;My Task&quot;</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">extensionElements</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">flowable:taskListener</span> <span class="attr">event</span>=<span class="string">&quot;create&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.flowable.MyTaskCreateListener&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">extensionElements</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">userTask</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>event的类型（触发的时刻）</strong></p>
<ul>
<li><strong><code>create</code></strong>：当Task被创建后，且所有属性设置完毕后</li>
<li><strong><code>assignment</code></strong>：当Task被分配给某人时。当执行流程到达<code>UserTask</code>时，<code>assignment event</code>会优先于<code>create event</code>触发</li>
<li><strong><code>complete</code></strong>：当Task被完成后，且被删除前</li>
<li><strong><code>delete</code></strong>：当Task即将被删除时</li>
</ul>
<p><strong>需要实现的接口：<code>org.flowable.engine.delegate.TaskListener</code></strong></p>
<p><strong>参考</strong></p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.flowable.org/docs/userguide/index.html#taskListeners">Task listener</a></li>
</ul>
<h2 id="515-multi-instance-for-each"><a class="markdownIt-Anchor" href="#515-multi-instance-for-each"></a> 5.15 Multi-instance (for each)</h2>
<p><strong>Description</strong></p>
<blockquote>
<p><code>multi-instance</code>用于重复执行业务流程中的某个步骤。在编程概念中，<code>multi-instance</code>同于<code>for each</code>语句：它允许您按顺序或并行地为给定集合中的每个元素执行某个步骤，甚至是完整的子流程</p>
</blockquote>
<p><strong>参考</strong></p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.flowable.org/docs/userguide/index.html#bpmnMultiInstance">Multi-instance (for each)</a></li>
</ul>
<h2 id="516-compensation-handlers"><a class="markdownIt-Anchor" href="#516-compensation-handlers"></a> 5.16 Compensation Handlers</h2>
<p><strong>Description</strong></p>
<blockquote>
<p>如果某个<code>activity</code>用于补偿另一个<code>activity</code>，则可以将其声明为<code>compensation handler</code>。<code>compensation handler</code>在正常流程中不存在，仅在抛出<code>compensation event</code>时执行</p>
</blockquote>
<p><strong>参考</strong></p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.flowable.org/docs/userguide/index.html#_compensation_handlers">Compensation Handlers</a></li>
</ul>
<h1 id="6-variables"><a class="markdownIt-Anchor" href="#6-variables"></a> 6 Variables</h1>
<p>在<code>Flowable</code>中，与<code>process</code>相关的这些数据被称为<code>variables</code>，这些数据存储在数据库中，这些变量可以在表达式中，或者<code>Java Service Task</code>中被使用</p>
<p>详细内容请参考<a target="_blank" rel="noopener" href="https://www.flowable.org/docs/userguide/index.html#apiVariables">Variables</a></p>
<h1 id="7-expression"><a class="markdownIt-Anchor" href="#7-expression"></a> 7 Expression</h1>
<p><code>Expression</code>通常指<code>UEL Expression</code>，<code>UEL</code>的全称是Unified Expression Language</p>
<p>详细内容请参考<a target="_blank" rel="noopener" href="https://www.flowable.org/docs/userguide/index.html#apiExpressions">Expression</a></p>
<h2 id="71-value-expression"><a class="markdownIt-Anchor" href="#71-value-expression"></a> 7.1 Value Expression</h2>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$&#123;myVar&#125;</span></span><br><span class="line"><span class="variable">$&#123;myBean.myProperty&#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="72-method-expression"><a class="markdownIt-Anchor" href="#72-method-expression"></a> 7.2 Method Expression</h2>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$&#123;printer.print()&#125;</span></span><br><span class="line"><span class="variable">$&#123;myBean.addNewOrder(&#x27;orderName&#x27;)&#125;</span></span><br><span class="line"><span class="variable">$&#123;myBean.doSomething(myVar, execution)&#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="73-default-object"><a class="markdownIt-Anchor" href="#73-default-object"></a> 7.3 default Object</h2>
<ol>
<li><code>execution</code>：DelegateExecution的对象</li>
<li><code>task</code>：DelegateTask的对象</li>
<li><code>authenticatedUserId</code>：当前已通过身份验证的用户的id</li>
</ol>
<h1 id="8-table"><a class="markdownIt-Anchor" href="#8-table"></a> 8 Table</h1>
<h2 id="81-database-table-names-explained"><a class="markdownIt-Anchor" href="#81-database-table-names-explained"></a> 8.1 Database table names explained</h2>
<p><strong>所有<code>Flowable</code>的表名前缀都是<code>ACT_</code></strong></p>
<p><strong><code>Flowable</code>的表名的第二段表示了用途，与API对应</strong></p>
<ol>
<li><strong><code>ACT_RE_*</code></strong>：<code>RE</code>表示<code>repository</code>，通常用于存储静态数据，比如<code>process definitions</code>、<code>process resources</code>等等</li>
<li><strong><code>ACT_RU_*</code></strong>：<code>RU</code>表示<code>runtime</code>，通常用于存储运行时数据，比如<code>tasks</code>、<code>variables</code>、<code>jobs</code>等等</li>
<li><strong><code>ACT_HI_*</code></strong>：<code>HI</code>表示<code>history</code>，通常保存历史数据，例如已经执行过的<code>process instance</code>、<code>variables</code>、<code>tasks</code>等等</li>
<li><strong><code>ACT_GE_*</code></strong>：<code>GE</code>表示<code>general</code>，通常表示全局通用数据及设置</li>
</ol>
<p><strong>参考</strong></p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.flowable.org/docs/userguide/index.html#database.tables.explained">Database table names explained</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/u011627980/article/details/51646920">activiti工作流表说明</a></li>
</ul>
<h2 id="82-creating-the-database-tables"><a class="markdownIt-Anchor" href="#82-creating-the-database-tables"></a> 8.2 Creating the database tables</h2>
<p><code>flowable</code>的建表语句都在<code>org.flowable:xxx</code>中的<code>org/flowable/db/create</code>路径下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flowable.&#123;db&#125;.&#123;create|drop&#125;.&#123;type&#125;.sql</span><br></pre></td></tr></table></figure>
<ul>
<li><code>&#123;db&#125;</code>：代表数据库类型</li>
<li><code>&#123;create|drop&#125;</code>：创建还是销毁</li>
<li><code>&#123;type&#125;</code>：类型，就两种<code>history</code>或<code>engine</code></li>
</ul>
<p><strong>sql文件路径（按如下顺序依次执行，表之间是有依赖关系的，切记按顺序执行）</strong></p>
<ol>
<li><code>org.flowable:flowable-engine-common:xxx</code>中的<code>org/flowable/common/db/create/flowable.mysql.create.common.sql</code></li>
<li><code>org.flowable:flowable-idm-engine:xxx</code>中的<code>org/flowable/idm/db/create/flowable.mysql.create.identity.sql</code></li>
<li><code>org.flowable:flowable-identitylink-service:xxx</code>中的<code>org/flowable/identitylink/service/db/create/flowable.mysql.create.identitylink.sql</code></li>
<li><code>org.flowable:flowable-identitylink-service:xxx</code>中的<code>org/flowable/identitylink/service/db/create/flowable.mysql.create.identitylink.history.sql</code></li>
<li><code>org.flowable:flowable-variable-service:xxx</code>中的<code>org/flowable/variable/service/db/create/flowable.mysql.create.variable.sql</code></li>
<li><code>org.flowable:flowable-variable-service:xxx</code>中的<code>org/flowable/variable/service/db/create/flowable.mysql.create.variable.history.sql</code></li>
<li><code>org.flowable:flowable-job-service:xxx</code>中的<code>org/flowable/job/service/db/create/flowable.mysql.create.job.sql</code></li>
<li><code>org.flowable:flowable-task-service:xxx</code>中的<code>org/flowable/task/service/db/create/flowable.mysql.create.task.sql</code></li>
<li><code>org.flowable:flowable-task-service:xxx</code>中的<code>org/flowable/task/service/db/create/flowable.mysql.create.task.history.sql</code></li>
<li><code>org.flowable:flowable-engine:xxx</code>中的<code>org/flowable/db/create/flowable.mysql.create.engine.sql</code></li>
<li><code>org.flowable:flowable-engine:xxx</code>中的<code>org/flowable/db/create/flowable.mysql.create.history.sql</code></li>
</ol>
<ul>
<li>共计34张表</li>
</ul>
<p><strong>参考</strong></p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.flowable.org/docs/userguide/index.html#creatingDatabaseTable">Creating the database tables</a></li>
</ul>
<h1 id="9-参考"><a class="markdownIt-Anchor" href="#9-参考"></a> 9 参考</h1>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.flowable.org/docs/userguide/index.html">Flowalbe Doc</a></li>
<li><a target="_blank" rel="noopener" href="https://wenku.baidu.com/view/92b1bc06cc17552707220854.html">BPMN icon</a></li>
</ul>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E5%8E%9F%E5%88%9B/" rel="tag"># 原创</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2018/07/25/Kubernetes-Concept/" rel="prev" title="Kubernetes-Concept">
      <i class="fa fa-chevron-left"></i> Kubernetes-Concept
    </a></div>
      <div class="post-nav-item">
    <a href="/2018/07/27/Lombok-Overview/" rel="next" title="Lombok-Overview">
      Lombok-Overview <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
      <div class="tabs tabs-comment">
        <ul class="nav-tabs">
            <li class="tab"><a href="#comment-livere">livere</a></li>
            <li class="tab"><a href="#comment-valine">valine</a></li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane livere" id="comment-livere">
              
  <div class="comments">
    <div id="lv-container" data-id="city" data-uid="MTAyMC8zMzY0My8xMDE5OA=="></div>
  </div>
  
            </div>
            <div class="tab-pane valine" id="comment-valine">
              <div class="comments" id="valine-comments"></div>
            </div>
        </div>
      </div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1-overview"><span class="nav-text"> 1 Overview</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-event"><span class="nav-text"> 2 Event</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#21-event-definitions"><span class="nav-text"> 2.1 Event Definitions</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#211-timer-event-definitions"><span class="nav-text"> 2.1.1 Timer Event Definitions</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#212-error-event-definitions"><span class="nav-text"> 2.1.2 Error Event Definitions</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#213-signal-event-definitions"><span class="nav-text"> 2.1.3 Signal Event Definitions</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#214-message-event-definitions"><span class="nav-text"> 2.1.4 Message Event Definitions</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#22-start-events"><span class="nav-text"> 2.2 Start Events</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#221-none-start-event"><span class="nav-text"> 2.2.1 None Start Event</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#222-timer-start-event"><span class="nav-text"> 2.2.2 Timer Start Event</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#223-message-start-event"><span class="nav-text"> 2.2.3 Message Start Event</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#224-signal-start-event"><span class="nav-text"> 2.2.4 Signal Start Event</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#225-error-start-event"><span class="nav-text"> 2.2.5 Error Start Event</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#23-end-events"><span class="nav-text"> 2.3 End Events</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#231-none-end-event"><span class="nav-text"> 2.3.1 None End Event</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#232-error-end-event"><span class="nav-text"> 2.3.2 Error End Event</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#233-terminate-end-event"><span class="nav-text"> 2.3.3 Terminate End Event</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#234-cancel-end-event"><span class="nav-text"> 2.3.4 Cancel End Event</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#24-boundary-events"><span class="nav-text"> 2.4 Boundary Events</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#241-timer-boundary-event"><span class="nav-text"> 2.4.1 Timer Boundary Event</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#242-error-boundary-event"><span class="nav-text"> 2.4.2 Error Boundary Event</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#243-signal-boundary-event"><span class="nav-text"> 2.4.3 Signal Boundary Event</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#244-message-boundary-event"><span class="nav-text"> 2.4.4 Message Boundary Event</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#245-cancel-boundary-event"><span class="nav-text"> 2.4.5 Cancel Boundary Event</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#246-compensation-boundary-event"><span class="nav-text"> 2.4.6 Compensation Boundary Event</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#25-intermediate-catching-events"><span class="nav-text"> 2.5 Intermediate Catching Events</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#251-timer-intermediate-catching-event"><span class="nav-text"> 2.5.1 Timer Intermediate Catching Event</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#252-signal-intermediate-catching-event"><span class="nav-text"> 2.5.2 Signal Intermediate Catching Event</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#253-message-intermediate-catching-event"><span class="nav-text"> 2.5.3 Message Intermediate Catching Event</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#26-intermediate-throwing-event"><span class="nav-text"> 2.6 Intermediate Throwing Event</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#261-intermediate-throwing-none-event"><span class="nav-text"> 2.6.1 Intermediate Throwing None Event</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#262-signal-intermediate-throwing-event"><span class="nav-text"> 2.6.2 Signal Intermediate Throwing Event</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#263-compensation-intermediate-throwing-event"><span class="nav-text"> 2.6.3 Compensation Intermediate Throwing Event</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-sequence-flow"><span class="nav-text"> 3 Sequence Flow</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#31-conditional-sequence-flow"><span class="nav-text"> 3.1 Conditional sequence flow</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#32-default-sequence-flow"><span class="nav-text"> 3.2 Default sequence flow</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-gateway"><span class="nav-text"> 4 Gateway</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#41-exclusive-gateway"><span class="nav-text"> 4.1 Exclusive Gateway</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#42-parallel-gateway"><span class="nav-text"> 4.2 Parallel Gateway</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#43-inclusive-gateway"><span class="nav-text"> 4.3 Inclusive Gateway</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#5-task"><span class="nav-text"> 5 Task</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#51-user-task"><span class="nav-text"> 5.1 User Task</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#52-script-task"><span class="nav-text"> 5.2 Script Task</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#53-java-service-task"><span class="nav-text"> 5.3 Java Service Task</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#54-web-service-task"><span class="nav-text"> 5.4 Web Service Task</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#55-business-rule-task"><span class="nav-text"> 5.5 Business Rule Task</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#56-email-task"><span class="nav-text"> 5.6 Email Task</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#57-http-task"><span class="nav-text"> 5.7 Http Task</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#58-mule-task"><span class="nav-text"> 5.8 Mule Task</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#59-camel-task"><span class="nav-text"> 5.9 Camel Task</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#510-manual-task"><span class="nav-text"> 5.10 Manual Task</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#511-java-receive-task"><span class="nav-text"> 5.11 Java Receive Task</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#512-shell-task"><span class="nav-text"> 5.12 Shell Task</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#513-execution-listener"><span class="nav-text"> 5.13 Execution listener</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#514-task-listener"><span class="nav-text"> 5.14 Task listener</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#515-multi-instance-for-each"><span class="nav-text"> 5.15 Multi-instance (for each)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#516-compensation-handlers"><span class="nav-text"> 5.16 Compensation Handlers</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#6-variables"><span class="nav-text"> 6 Variables</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-expression"><span class="nav-text"> 7 Expression</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#71-value-expression"><span class="nav-text"> 7.1 Value Expression</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#72-method-expression"><span class="nav-text"> 7.2 Method Expression</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#73-default-object"><span class="nav-text"> 7.3 default Object</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#8-table"><span class="nav-text"> 8 Table</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#81-database-table-names-explained"><span class="nav-text"> 8.1 Database table names explained</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#82-creating-the-database-tables"><span class="nav-text"> 8.2 Creating the database tables</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#9-%E5%8F%82%E8%80%83"><span class="nav-text"> 9 参考</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Liuyehcf"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">Liuyehcf</p>
  <div class="site-description" itemprop="description">大音希声，大象无形</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">284</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">102</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2017 – 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Liuyehcf</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>











<script>
if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme    : 'forest',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    });
  }, window.mermaid);
}
</script>


  

  

  

<script>
NexT.utils.loadComments(document.querySelector('#lv-container'), () => {
  window.livereOptions = {
    refer: location.pathname.replace(CONFIG.root, '').replace('index.html', '')
  };
  (function(d, s) {
    var j, e = d.getElementsByTagName(s)[0];
    if (typeof LivereTower === 'function') { return; }
    j = d.createElement(s);
    j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
    j.async = true;
    e.parentNode.insertBefore(j, e);
  })(document, 'script');
});
</script>


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'qhEhLuMeMOy1zgcBhkqUS6P8-gzGzoHsz',
      appKey     : 'uhkruDLNLNdL5rQjRBY2X9Ke',
      placeholder: "Just go go",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
