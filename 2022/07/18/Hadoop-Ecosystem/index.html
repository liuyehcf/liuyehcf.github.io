<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.1.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":false,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="阅读更多">
<meta property="og:type" content="article">
<meta property="og:title" content="Hadoop-Ecosystem">
<meta property="og:url" content="http://example.com/2022/07/18/Hadoop-Ecosystem/index.html">
<meta property="og:site_name" content="Liuye Notebook">
<meta property="og:description" content="阅读更多">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/images/Hadoop-Ecosystem/HADOOP-ECOSYSTEM-Edureka.png">
<meta property="og:image" content="http://example.com/images/Hadoop-Ecosystem/HadoopEcosystem-min.png">
<meta property="og:image" content="http://example.com/images/Hadoop-Ecosystem/hdfsarchitecture.gif">
<meta property="og:image" content="http://example.com/images/Hadoop-Ecosystem/spark-cluster-overview.png">
<meta property="og:image" content="http://example.com/images/Hadoop-Ecosystem/hive_core_architecture.jpeg">
<meta property="article:published_time" content="2022-07-18T11:17:45.000Z">
<meta property="article:modified_time" content="2024-05-19T06:58:04.000Z">
<meta property="article:author" content="Liuyehcf">
<meta property="article:tag" content="原创">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/images/Hadoop-Ecosystem/HADOOP-ECOSYSTEM-Edureka.png">

<link rel="canonical" href="http://example.com/2022/07/18/Hadoop-Ecosystem/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Hadoop-Ecosystem | Liuye Notebook</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Liuye Notebook</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-explore">

    <a href="/explore/" rel="section"><i class="fa fa-sitemap fa-fw"></i>发现</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/07/18/Hadoop-Ecosystem/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Liuyehcf">
      <meta itemprop="description" content="大音希声，大象无形">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Liuye Notebook">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Hadoop-Ecosystem
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-07-18 19:17:45" itemprop="dateCreated datePublished" datetime="2022-07-18T19:17:45+08:00">2022-07-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-05-19 14:58:04" itemprop="dateModified" datetime="2024-05-19T14:58:04+08:00">2024-05-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Database/" itemprop="url" rel="index"><span itemprop="name">Database</span></a>
                </span>
            </span>

          
            <span id="/2022/07/18/Hadoop-Ecosystem/" class="post-meta-item leancloud_visitors" data-flag-title="Hadoop-Ecosystem" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2022/07/18/Hadoop-Ecosystem/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/07/18/Hadoop-Ecosystem/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p><strong>阅读更多</strong></p>
<span id="more"></span>
<h1 id="1-overview"><a class="markdownIt-Anchor" href="#1-overview"></a> 1 Overview</h1>
<p>Below are the Hadoop components, that together form a Hadoop ecosystem:</p>
<ul>
<li><code>HDFS</code> -&gt; Hadoop Distributed File System</li>
<li><code>YARN</code> -&gt; Yet Another Resource Negotiator</li>
<li><code>MapReduce</code> -&gt; Data processing using programming</li>
<li><code>Spark</code> -&gt; In-memory Data Processing</li>
<li><code>PIG</code> -&gt; Data Processing Services using Query (SQL-like)</li>
<li><code>HBase</code> -&gt; NoSQL Database</li>
<li><code>Mahout &amp; Spark MLlib</code> -&gt; Machine Learning</li>
<li><code>Drill</code> -&gt; SQL on Hadoop</li>
<li><code>Zookeeper</code> -&gt; Managing Cluster</li>
<li><code>Oozie</code> -&gt; Job Scheduling</li>
<li><code>Flume</code> -&gt; Data Ingesting Services</li>
<li><code>Solr &amp; Lucene</code> -&gt; Searching &amp; Indexing</li>
<li><code>Ambari</code> -&gt; Provision, Monitor and Maintain cluster</li>
</ul>
<p><img src="/images/Hadoop-Ecosystem/HADOOP-ECOSYSTEM-Edureka.png" alt="HADOOP-ECOSYSTEM-Edureka" /></p>
<p><img src="/images/Hadoop-Ecosystem/HadoopEcosystem-min.png" alt="HadoopEcosystem-min" /></p>
<h1 id="2-hdfs"><a class="markdownIt-Anchor" href="#2-hdfs"></a> 2 HDFS</h1>
<blockquote>
<p>HDFS has a master/slave architecture. An HDFS cluster consists of a single NameNode, a master server that manages the file system namespace and regulates access to files by clients. In addition, there are a number of DataNodes, usually one per node in the cluster, which manage storage attached to the nodes that they run on. HDFS exposes a file system namespace and allows user data to be stored in files. Internally, a file is split into one or more blocks and these blocks are stored in a set of DataNodes. The NameNode executes file system namespace operations like opening, closing, and renaming files and directories. It also determines the mapping of blocks to DataNodes. The DataNodes are responsible for serving read and write requests from the file system’s clients. The DataNodes also perform block creation, deletion, and replication upon instruction from the NameNode.</p>
</blockquote>
<p><img src="/images/Hadoop-Ecosystem/hdfsarchitecture.gif" alt="hdfsarchitecture" /></p>
<h2 id="21-deployment"><a class="markdownIt-Anchor" href="#21-deployment"></a> 2.1 Deployment</h2>
<p><strong>Prerequisite:</strong></p>
<ul>
<li><code>jdk8</code>, high than 8 may encounter runtime problems</li>
</ul>
<p>Pseudo Distributed Cluster means the cluster has only one machine.</p>
<p><strong>Run the following script to setup the cluster:</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">ROOT=$(<span class="built_in">dirname</span> <span class="string">&quot;<span class="variable">$0</span>&quot;</span>)</span><br><span class="line">ROOT=$(<span class="built_in">cd</span> <span class="string">&quot;<span class="variable">$ROOT</span>&quot;</span>; <span class="built_in">pwd</span>)</span><br><span class="line"></span><br><span class="line">IPV4_ADDR=$(ip -4 addr show scope global | grep inet | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> | <span class="built_in">cut</span> -d/ -f1 | <span class="built_in">head</span> -n 1)</span><br><span class="line"></span><br><span class="line">wget https://mirrors.tuna.tsinghua.edu.cn/apache/hadoop/core/hadoop-3.3.6/hadoop-3.3.6.tar.gz</span><br><span class="line">tar -zxf hadoop-3.3.6.tar.gz -C <span class="variable">$&#123;ROOT&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> HADOOP_HOME=<span class="variable">$&#123;ROOT&#125;</span>/hadoop-3.3.6</span><br><span class="line"><span class="built_in">mkdir</span> <span class="variable">$&#123;HADOOP_HOME&#125;</span>/runtime</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ ! -f <span class="variable">$&#123;HADOOP_HOME&#125;</span>/etc/hadoop/hadoop-env.sh.bak ]; <span class="keyword">then</span></span><br><span class="line">    \<span class="built_in">cp</span> -vf <span class="variable">$&#123;HADOOP_HOME&#125;</span>/etc/hadoop/hadoop-env.sh <span class="variable">$&#123;HADOOP_HOME&#125;</span>/etc/hadoop/hadoop-env.sh.bak</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">JAVA_HOME_PATH=$(<span class="built_in">readlink</span> -f $(<span class="built_in">which</span> java))</span><br><span class="line">JAVA_HOME_PATH=<span class="variable">$&#123;JAVA_HOME_PATH%/bin/java&#125;</span></span><br><span class="line">sed -i -E <span class="string">&quot;s|^.*export JAVA_HOME=.*$|export JAVA_HOME=<span class="variable">$&#123;JAVA_HOME_PATH&#125;</span>|g&quot;</span> <span class="variable">$&#123;HADOOP_HOME&#125;</span>/etc/hadoop/hadoop-env.sh</span><br><span class="line">sed -i -E <span class="string">&quot;s|^.*export HADOOP_HOME=.*$|export HADOOP_HOME=<span class="variable">$&#123;HADOOP_HOME&#125;</span>|g&quot;</span> <span class="variable">$&#123;HADOOP_HOME&#125;</span>/etc/hadoop/hadoop-env.sh</span><br><span class="line">sed -i -E <span class="string">&quot;s|^.*export HADOOP_LOG_DIR=.*$|export HADOOP_LOG_DIR=\$&#123;HADOOP_HOME&#125;/logs|g&quot;</span> <span class="variable">$&#123;HADOOP_HOME&#125;</span>/etc/hadoop/hadoop-env.sh</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ ! -f <span class="variable">$&#123;HADOOP_HOME&#125;</span>/etc/hadoop/core-site.xml.bak ]; <span class="keyword">then</span></span><br><span class="line">    \<span class="built_in">cp</span> -vf <span class="variable">$&#123;HADOOP_HOME&#125;</span>/etc/hadoop/core-site.xml <span class="variable">$&#123;HADOOP_HOME&#125;</span>/etc/hadoop/core-site.xml.bak</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="built_in">cat</span> &gt; <span class="variable">$&#123;HADOOP_HOME&#125;</span>/etc/hadoop/core-site.xml &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">&lt;configuration&gt;</span></span><br><span class="line"><span class="string">    &lt;property&gt;</span></span><br><span class="line"><span class="string">        &lt;name&gt;fs.defaultFS&lt;/name&gt;</span></span><br><span class="line"><span class="string">        &lt;value&gt;hdfs://$&#123;IPV4_ADDR&#125;:9000&lt;/value&gt;</span></span><br><span class="line"><span class="string">    &lt;/property&gt;</span></span><br><span class="line"><span class="string">&lt;/configuration&gt;</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ ! -f <span class="variable">$&#123;HADOOP_HOME&#125;</span>/etc/hadoop/hdfs-site.xml.bak ]; <span class="keyword">then</span></span><br><span class="line">    \<span class="built_in">cp</span> -vf <span class="variable">$&#123;HADOOP_HOME&#125;</span>/etc/hadoop/hdfs-site.xml <span class="variable">$&#123;HADOOP_HOME&#125;</span>/etc/hadoop/hdfs-site.xml.bak</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="built_in">cat</span> &gt; <span class="variable">$&#123;HADOOP_HOME&#125;</span>/etc/hadoop/hdfs-site.xml &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">&lt;configuration&gt;</span></span><br><span class="line"><span class="string">    &lt;property&gt;</span></span><br><span class="line"><span class="string">        &lt;name&gt;dfs.replication&lt;/name&gt;</span></span><br><span class="line"><span class="string">        &lt;value&gt;1&lt;/value&gt;</span></span><br><span class="line"><span class="string">    &lt;/property&gt;</span></span><br><span class="line"><span class="string">    &lt;property&gt;</span></span><br><span class="line"><span class="string">        &lt;name&gt;dfs.namenode.name.dir&lt;/name&gt;</span></span><br><span class="line"><span class="string">        &lt;value&gt;file:$&#123;HADOOP_HOME&#125;/runtime/namenode&lt;/value&gt;</span></span><br><span class="line"><span class="string">    &lt;/property&gt;</span></span><br><span class="line"><span class="string">    &lt;property&gt;</span></span><br><span class="line"><span class="string">        &lt;name&gt;dfs.datanode.data.dir&lt;/name&gt;</span></span><br><span class="line"><span class="string">        &lt;value&gt;file:$&#123;HADOOP_HOME&#125;/runtime/datanode&lt;/value&gt;</span></span><br><span class="line"><span class="string">    &lt;/property&gt;</span></span><br><span class="line"><span class="string">&lt;/configuration&gt;</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ ! -f <span class="variable">$&#123;HADOOP_HOME&#125;</span>/etc/hadoop/mapred-site.xml.bak ]; <span class="keyword">then</span></span><br><span class="line">    \<span class="built_in">cp</span> -vf <span class="variable">$&#123;HADOOP_HOME&#125;</span>/etc/hadoop/mapred-site.xml <span class="variable">$&#123;HADOOP_HOME&#125;</span>/etc/hadoop/mapred-site.xml.bak</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="built_in">cat</span> &gt; <span class="variable">$&#123;HADOOP_HOME&#125;</span>/etc/hadoop/mapred-site.xml &lt;&lt; <span class="string">&#x27;EOF&#x27;</span></span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;mapreduce.framework.name&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;yarn&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ ! -f <span class="variable">$&#123;HADOOP_HOME&#125;</span>/etc/hadoop/yarn-site.xml.bak ]; <span class="keyword">then</span></span><br><span class="line">    \<span class="built_in">cp</span> -vf <span class="variable">$&#123;HADOOP_HOME&#125;</span>/etc/hadoop/yarn-site.xml <span class="variable">$&#123;HADOOP_HOME&#125;</span>/etc/hadoop/yarn-site.xml.bak</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="built_in">cat</span> &gt; <span class="variable">$&#123;HADOOP_HOME&#125;</span>/etc/hadoop/yarn-site.xml &lt;&lt; <span class="string">&#x27;EOF&#x27;</span></span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;mapreduce_shuffle&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;yarn.nodemanager.env-whitelist&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;JAVA_HOME,HADOOP_COMMON_HOME,HADOOP_HDFS_HOME,HADOOP_CONF_DIR,CLASSPATH_PREPEND_DISTCACHE,HADOOP_YARN_HOME,HADOOP_MAPRED_HOME&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"><span class="comment"># namenode format</span></span><br><span class="line"><span class="variable">$&#123;HADOOP_HOME&#125;</span>/bin/hdfs namenode -format</span><br><span class="line"></span><br><span class="line"><span class="comment"># Start all daemons</span></span><br><span class="line"><span class="variable">$&#123;HADOOP_HOME&#125;</span>/bin/hdfs --daemon start namenode</span><br><span class="line"><span class="variable">$&#123;HADOOP_HOME&#125;</span>/bin/hdfs --daemon start datanode</span><br><span class="line"></span><br><span class="line"><span class="variable">$&#123;HADOOP_HOME&#125;</span>/bin/yarn --daemon start resourcemanager</span><br><span class="line"><span class="variable">$&#123;HADOOP_HOME&#125;</span>/bin/yarn --daemon start nodemanager</span><br><span class="line"></span><br><span class="line"><span class="variable">$&#123;HADOOP_HOME&#125;</span>/bin/mapred --daemon start historyserver</span><br><span class="line"></span><br><span class="line"><span class="variable">$&#123;HADOOP_HOME&#125;</span>/bin/hdfs dfsadmin -report</span><br><span class="line"></span><br><span class="line">jps</span><br></pre></td></tr></table></figure>
<p><strong>Stop all:</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$&#123;HADOOP_HOME&#125;</span>/bin/hdfs --daemon stop namenode</span><br><span class="line"><span class="variable">$&#123;HADOOP_HOME&#125;</span>/bin/hdfs --daemon stop datanode</span><br><span class="line"></span><br><span class="line"><span class="variable">$&#123;HADOOP_HOME&#125;</span>/bin/yarn --daemon stop resourcemanager</span><br><span class="line"><span class="variable">$&#123;HADOOP_HOME&#125;</span>/bin/yarn --daemon stop nodemanager</span><br><span class="line"></span><br><span class="line"><span class="variable">$&#123;HADOOP_HOME&#125;</span>/bin/mapred --daemon stop historyserver</span><br></pre></td></tr></table></figure>
<p><strong>Test:</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$&#123;HADOOP_HOME&#125;</span>/bin/hdfs dfs -<span class="built_in">ls</span> /</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Hello Hadoop Goodbye Hadoop&quot;</span> &gt; /tmp/input.txt</span><br><span class="line"><span class="variable">$&#123;HADOOP_HOME&#125;</span>/bin/hdfs dfs -<span class="built_in">mkdir</span> /wordcount_input</span><br><span class="line"><span class="variable">$&#123;HADOOP_HOME&#125;</span>/bin/hdfs dfs -put /tmp/input.txt /wordcount_input</span><br><span class="line"><span class="variable">$&#123;HADOOP_HOME&#125;</span>/bin/hadoop jar <span class="variable">$&#123;HADOOP_HOME&#125;</span>/share/hadoop/mapreduce/hadoop-mapreduce-examples-*.jar wordcount /wordcount_input /wordcount_output</span><br><span class="line"></span><br><span class="line"><span class="variable">$&#123;HADOOP_HOME&#125;</span>/bin/hdfs dfs -<span class="built_in">cat</span> <span class="string">&quot;/wordcount_output/*&quot;</span></span><br></pre></td></tr></table></figure>
<h1 id="3-spark"><a class="markdownIt-Anchor" href="#3-spark"></a> 3 Spark</h1>
<p><a target="_blank" rel="noopener" href="https://www.databricks.com/glossary/what-is-apache-spark">What Is Apache Spark?</a></p>
<p><img src="/images/Hadoop-Ecosystem/spark-cluster-overview.png" alt="spark-cluster-overview" /></p>
<h2 id="31-deployment"><a class="markdownIt-Anchor" href="#31-deployment"></a> 3.1 Deployment</h2>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">ROOT=$(<span class="built_in">dirname</span> <span class="string">&quot;<span class="variable">$0</span>&quot;</span>)</span><br><span class="line">ROOT=$(<span class="built_in">cd</span> <span class="string">&quot;<span class="variable">$ROOT</span>&quot;</span>; <span class="built_in">pwd</span>)</span><br><span class="line"></span><br><span class="line">wget https://mirrors.tuna.tsinghua.edu.cn/apache/spark/spark-3.5.1/spark-3.5.1-bin-hadoop3.tgz</span><br><span class="line">tar -zxf spark-3.5.1-bin-hadoop3.tgz</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> SPARK_HOME=<span class="variable">$&#123;ROOT&#125;</span>/spark-3.5.1-bin-hadoop3</span><br><span class="line"><span class="built_in">cat</span> &gt; <span class="variable">$&#123;SPARK_HOME&#125;</span>/conf/spark-env.sh &lt;&lt; <span class="string">&#x27;EOF&#x27;</span></span><br><span class="line">SPARK_MASTER_HOST=localhost</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"><span class="variable">$&#123;SPARK_HOME&#125;</span>/sbin/start-master.sh</span><br><span class="line"><span class="variable">$&#123;SPARK_HOME&#125;</span>/sbin/start-worker.sh spark://127.0.0.1:7077</span><br></pre></td></tr></table></figure>
<p><strong>Stop:</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$&#123;SPARK_HOME&#125;</span>/sbin/stop-master.sh</span><br><span class="line"><span class="variable">$&#123;SPARK_HOME&#125;</span>/sbin/stop-worker.sh</span><br></pre></td></tr></table></figure>
<p><strong>Test:</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$&#123;SPARK_HOME&#125;</span>/bin/spark-shell</span><br><span class="line"></span><br><span class="line">scala&gt; val nums = sc.parallelize(1 to 10)</span><br><span class="line">scala&gt; println(nums.count())</span><br><span class="line">scala&gt; :quit</span><br><span class="line"></span><br><span class="line"><span class="variable">$&#123;SPARK_HOME&#125;</span>/bin/spark-submit <span class="variable">$&#123;SPARK_HOME&#125;</span>/examples/src/main/python/pi.py 10</span><br></pre></td></tr></table></figure>
<h1 id="4-hive"><a class="markdownIt-Anchor" href="#4-hive"></a> 4 Hive</h1>
<p><a target="_blank" rel="noopener" href="https://www.databricks.com/glossary/apache-hive">What is Apache Hive?</a></p>
<p><img src="/images/Hadoop-Ecosystem/hive_core_architecture.jpeg" alt="hive_core_architecture" /></p>
<h2 id="41-components"><a class="markdownIt-Anchor" href="#41-components"></a> 4.1 Components</h2>
<h3 id="411-hive-server-2-hs2"><a class="markdownIt-Anchor" href="#411-hive-server-2-hs2"></a> 4.1.1 Hive-Server 2 (HS2)</h3>
<p>HS2 supports multi-client concurrency and authentication. It is designed to provide better support for open API clients like JDBC and ODBC.</p>
<h3 id="412-hive-metastore-server-hms"><a class="markdownIt-Anchor" href="#412-hive-metastore-server-hms"></a> 4.1.2 Hive Metastore Server (HMS)</h3>
<p>The Hive Metastore (HMS) is a central repository of metadata for Hive tables and partitions in a relational database, and provides clients (including Hive, Impala and Spark) access to this information using the metastore service API. It has become a building block for data lakes that utilize the diverse world of open-source software, such as Apache Spark and Presto. In fact, a whole ecosystem of tools, open-source and otherwise, are built around the Hive Metastore, some of which this diagram illustrates.</p>
<h2 id="42-deployment"><a class="markdownIt-Anchor" href="#42-deployment"></a> 4.2 Deployment</h2>
<p><strong>Prerequisite:</strong></p>
<ul>
<li><code>jdk8</code>, high than 8 may encounter runtime problems</li>
</ul>
<p><strong>Step1: Installation</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">ROOT=$(<span class="built_in">dirname</span> <span class="string">&quot;<span class="variable">$0</span>&quot;</span>)</span><br><span class="line">ROOT=$(<span class="built_in">cd</span> <span class="string">&quot;<span class="variable">$ROOT</span>&quot;</span>; <span class="built_in">pwd</span>)</span><br><span class="line"></span><br><span class="line">wget https://mirrors.tuna.tsinghua.edu.cn/apache/hive/hive-3.1.3/apache-hive-3.1.3-bin.tar.gz</span><br><span class="line">tar -zxf apache-hive-3.1.3-bin.tar.gz -C <span class="variable">$&#123;ROOT&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> HIVE_HOME=<span class="variable">$&#123;ROOT&#125;</span>/apache-hive-3.1.3-bin</span><br><span class="line"></span><br><span class="line"><span class="built_in">cp</span> -f <span class="variable">$&#123;HIVE_HOME&#125;</span>/conf/hive-default.xml.template <span class="variable">$&#123;HIVE_HOME&#125;</span>/conf/hive-site.xml</span><br></pre></td></tr></table></figure>
<p>The template of <code>$&#123;HIVE_HOME&#125;/conf/hive-site.xml</code> is called <code>$&#123;HIVE_HOME&#125;/conf/hive-default.xml.template</code></p>
<p><strong>Step2: Start HiveMetastore with derby</strong></p>
<ul>
<li>
<p>Dependencies are already installed with hive.</p>
</li>
<li>
<p>Edit <code>$&#123;HIVE_HOME&#125;/conf/hive-site.xml</code> as follows:</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;configuration&gt;</span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;javax.jdo.option.ConnectionURL&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;jdbc:derby:;databaseName=metastore_db;create=true&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;javax.jdo.option.ConnectionDriverName&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;org.apache.derby.jdbc.EmbeddedDriver&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;javax.jdo.option.ConnectionUserName&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;APP&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;javax.jdo.option.ConnectionPassword&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;mine&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;hive.metastore.warehouse.dir&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;/user/hive/warehouse&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;hive.exec.local.scratchdir&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;/tmp/hive&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>Init:</p>
  <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># You must set env &#x27;HADOOP_HOME&#x27;</span></span><br><span class="line"><span class="variable">$&#123;HIVE_HOME&#125;</span>/bin/schematool -dbType derby -initSchema</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>Step2: Or, start HiveMetastore with Mysql</strong></p>
<ul>
<li>
<p>Start a mysql server via docker:</p>
  <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -dit -p 13306:3306 -e MYSQL_ROOT_PASSWORD=<span class="string">&#x27;Abcd1234&#x27;</span> -v /path/xxx/mysql:/var/lib/mysql mysql:5.7.37 mysqld --lower_case_table_names=1</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>Download mysql jdbc driver from <a target="_blank" rel="noopener" href="https://dev.mysql.com/downloads/connector/j/">MySQL Community Downloads</a>:</p>
<ul>
<li>choose <code>Platform Independent</code></li>
</ul>
  <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget https://dev.mysql.com/get/Downloads/Connector-J/mysql-connector-j-8.3.0.tar.gz</span><br><span class="line">tar -zxvf mysql-connector-j-8.3.0.tar.gz</span><br><span class="line"><span class="built_in">cp</span> -f mysql-connector-j-8.3.0/mysql-connector-j-8.3.0.jar <span class="variable">$&#123;HIVE_HOME&#125;</span>/lib/</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>Edit <code>$&#123;HIVE_HOME&#125;/conf/hive-site.xml</code> as follows:</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;configuration&gt;</span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;javax.jdo.option.ConnectionURL&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;jdbc:mysql://localhost:13306/metastore_db?createDatabaseIfNotExist=true&lt;/value&gt;</span><br><span class="line">        &lt;description&gt;Metadata storage DB connection URL&lt;/description&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;javax.jdo.option.ConnectionDriverName&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;com.mysql.cj.jdbc.Driver&lt;/value&gt;</span><br><span class="line">        &lt;description&gt;Driver class for the DB&lt;/description&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;javax.jdo.option.ConnectionUserName&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;root&lt;/value&gt;</span><br><span class="line">        &lt;description&gt;Username for accessing the DB&lt;/description&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;javax.jdo.option.ConnectionPassword&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;Abcd1234&lt;/value&gt;</span><br><span class="line">        &lt;description&gt;Password for accessing the DB&lt;/description&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;hive.metastore.warehouse.dir&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;/user/hive/warehouse&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;hive.exec.local.scratchdir&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;/tmp/hive&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>Init:</p>
  <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># You must set env &#x27;HADOOP_HOME&#x27;</span></span><br><span class="line"><span class="variable">$&#123;HIVE_HOME&#125;</span>/bin/schematool -dbType mysql -initSchema</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>Step3: Hive On MapReduce</strong></p>
<ul>
<li>Test
<ul>
<li>
<p>Text Format</p>
  <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> &gt; /tmp/employees.txt &lt;&lt; <span class="string">&#x27;EOF&#x27;</span></span><br><span class="line">1,John Doe,12000,IT</span><br><span class="line">2,Jane Doe,15000,HR</span><br><span class="line">3,Jim Beam,9000,Marketing</span><br><span class="line">4,Sarah Connor,18000,IT</span><br><span class="line">5,Gordon Freeman,20000,R&amp;D</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"><span class="variable">$&#123;HADOOP_HOME&#125;</span>/bin/hdfs dfs -<span class="built_in">mkdir</span> -p /user/hive/warehouse/test_db/</span><br><span class="line"><span class="variable">$&#123;HADOOP_HOME&#125;</span>/bin/hdfs dfs -put /tmp/employees.txt /user/hive/warehouse/test_db/</span><br><span class="line"></span><br><span class="line"><span class="variable">$&#123;HIVE_HOME&#125;</span>/bin/hive</span><br><span class="line"></span><br><span class="line">hive&gt; CREATE DATABASE IF NOT EXISTS test_db;</span><br><span class="line">hive&gt; USE test_db;</span><br><span class="line">hive&gt; CREATE TABLE IF NOT EXISTS employees (</span><br><span class="line"><span class="built_in">id</span> INT,</span><br><span class="line">name STRING,</span><br><span class="line">salary INT,</span><br><span class="line">department STRING</span><br><span class="line">)</span><br><span class="line">ROW FORMAT DELIMITED</span><br><span class="line">FIELDS TERMINATED BY <span class="string">&#x27;,&#x27;</span></span><br><span class="line">STORED AS TEXTFILE;</span><br><span class="line">hive&gt; LOAD DATA INPATH <span class="string">&#x27;/user/hive/warehouse/test_db/employees.txt&#x27;</span> INTO TABLE employees;</span><br><span class="line"></span><br><span class="line">hive&gt; SELECT * FROM employees;</span><br><span class="line">hive&gt; SELECT name, salary FROM employees WHERE department = <span class="string">&#x27;IT&#x27;</span>;</span><br><span class="line">hive&gt; SELECT department, AVG(salary) AS average_salary FROM employees GROUP BY department;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>Orc Format</p>
  <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; CREATE TABLE employees_orc (</span><br><span class="line"><span class="built_in">id</span> INT,</span><br><span class="line">name STRING,</span><br><span class="line">salary INT,</span><br><span class="line">department STRING</span><br><span class="line">) STORED AS ORC;</span><br><span class="line"></span><br><span class="line">hive&gt; INSERT INTO employees_orc (<span class="built_in">id</span>, name, salary, department) VALUES </span><br><span class="line">(1, <span class="string">&#x27;Alice&#x27;</span>, 70000, <span class="string">&#x27;Engineering&#x27;</span>),</span><br><span class="line">(2, <span class="string">&#x27;Bob&#x27;</span>, 60000, <span class="string">&#x27;HR&#x27;</span>),</span><br><span class="line">(3, <span class="string">&#x27;Charlie&#x27;</span>, 80000, <span class="string">&#x27;Finance&#x27;</span>),</span><br><span class="line">(4, <span class="string">&#x27;David&#x27;</span>, 75000, <span class="string">&#x27;Engineering&#x27;</span>),</span><br><span class="line">(5, <span class="string">&#x27;Eve&#x27;</span>, 65000, <span class="string">&#x27;Marketing&#x27;</span>);</span><br><span class="line"></span><br><span class="line">hive&gt; SELECT * FROM employees_orc;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>Parquet Format</p>
  <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; CREATE TABLE employees_parquet (</span><br><span class="line"><span class="built_in">id</span> INT,</span><br><span class="line">name STRING,</span><br><span class="line">salary INT,</span><br><span class="line">department STRING</span><br><span class="line">) STORED AS Parquet;</span><br><span class="line"></span><br><span class="line">hive&gt; INSERT INTO employees_parquet (<span class="built_in">id</span>, name, salary, department) VALUES </span><br><span class="line">(1, <span class="string">&#x27;Alice&#x27;</span>, 70000, <span class="string">&#x27;Engineering&#x27;</span>),</span><br><span class="line">(2, <span class="string">&#x27;Bob&#x27;</span>, 60000, <span class="string">&#x27;HR&#x27;</span>),</span><br><span class="line">(3, <span class="string">&#x27;Charlie&#x27;</span>, 80000, <span class="string">&#x27;Finance&#x27;</span>),</span><br><span class="line">(4, <span class="string">&#x27;David&#x27;</span>, 75000, <span class="string">&#x27;Engineering&#x27;</span>),</span><br><span class="line">(5, <span class="string">&#x27;Eve&#x27;</span>, 65000, <span class="string">&#x27;Marketing&#x27;</span>);</span><br><span class="line"></span><br><span class="line">hive&gt; SELECT * FROM employees_parquet;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<p><strong>Step3: Hive On Spark</strong></p>
<ul>
<li>
<p>Edit <code>$&#123;HIVE_HOME&#125;/conf/hive-site.xml</code>, add following properties:</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;property&gt;</span><br><span class="line">    &lt;name&gt;hive.execution.engine&lt;/name&gt;</span><br><span class="line">    &lt;value&gt;spark&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">    &lt;name&gt;spark.master&lt;/name&gt;</span><br><span class="line">    &lt;value&gt;spark://localhost:7077&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>Test</p>
  <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$&#123;HIVE_HOME&#125;</span>/bin/hive</span><br><span class="line"></span><br><span class="line">hive&gt; CREATE TABLE employees_parquet (</span><br><span class="line"><span class="built_in">id</span> INT,</span><br><span class="line">name STRING,</span><br><span class="line">salary INT,</span><br><span class="line">department STRING</span><br><span class="line">) STORED AS Parquet;</span><br><span class="line"></span><br><span class="line">hive&gt; INSERT INTO employees_parquet (<span class="built_in">id</span>, name, salary, department) VALUES </span><br><span class="line">(1, <span class="string">&#x27;Alice&#x27;</span>, 70000, <span class="string">&#x27;Engineering&#x27;</span>),</span><br><span class="line">(2, <span class="string">&#x27;Bob&#x27;</span>, 60000, <span class="string">&#x27;HR&#x27;</span>),</span><br><span class="line">(3, <span class="string">&#x27;Charlie&#x27;</span>, 80000, <span class="string">&#x27;Finance&#x27;</span>),</span><br><span class="line">(4, <span class="string">&#x27;David&#x27;</span>, 75000, <span class="string">&#x27;Engineering&#x27;</span>),</span><br><span class="line">(5, <span class="string">&#x27;Eve&#x27;</span>, 65000, <span class="string">&#x27;Marketing&#x27;</span>);</span><br><span class="line"></span><br><span class="line">hive&gt; SELECT * FROM employees_parquet;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="5-docker-compose"><a class="markdownIt-Anchor" href="#5-docker-compose"></a> 5 Docker-Compose</h1>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/big-data-europe">Big Data Europe</a>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/big-data-europe/docker-hadoop">docker-hadoop</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/big-data-europe/docker-hive">docker-hive</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/big-data-europe/docker-spark">docker-spark</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/big-data-europe/docker-flink">docker-flink</a></li>
</ul>
</li>
</ul>
<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">
    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E5%8E%9F%E5%88%9B/" rel="tag"># 原创</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2022/07/10/DBMS-Trivial/" rel="prev" title="DBMS-Trivial">
      <i class="fa fa-chevron-left"></i> DBMS-Trivial
    </a></div>
      <div class="post-nav-item">
    <a href="/2022/07/18/ClickHouse-Trial/" rel="next" title="ClickHouse-Trial">
      ClickHouse-Trial <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
      <div class="tabs tabs-comment">
        <ul class="nav-tabs">
            <li class="tab"><a href="#comment-livere">livere</a></li>
            <li class="tab"><a href="#comment-valine">valine</a></li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane livere" id="comment-livere">
              
  <div class="comments">
    <div id="lv-container" data-id="city" data-uid="MTAyMC8zMzY0My8xMDE5OA=="></div>
  </div>
  
            </div>
            <div class="tab-pane valine" id="comment-valine">
              <div class="comments" id="valine-comments"></div>
            </div>
        </div>
      </div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1-overview"><span class="nav-text"> 1 Overview</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-hdfs"><span class="nav-text"> 2 HDFS</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#21-deployment"><span class="nav-text"> 2.1 Deployment</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-spark"><span class="nav-text"> 3 Spark</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#31-deployment"><span class="nav-text"> 3.1 Deployment</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-hive"><span class="nav-text"> 4 Hive</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#41-components"><span class="nav-text"> 4.1 Components</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#411-hive-server-2-hs2"><span class="nav-text"> 4.1.1 Hive-Server 2 (HS2)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#412-hive-metastore-server-hms"><span class="nav-text"> 4.1.2 Hive Metastore Server (HMS)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#42-deployment"><span class="nav-text"> 4.2 Deployment</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#5-docker-compose"><span class="nav-text"> 5 Docker-Compose</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Liuyehcf"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">Liuyehcf</p>
  <div class="site-description" itemprop="description">大音希声，大象无形</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">288</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">98</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2017 – 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Liuyehcf</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>











<script>
if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme    : 'forest',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    });
  }, window.mermaid);
}
</script>


  

  

  

<script>
NexT.utils.loadComments(document.querySelector('#lv-container'), () => {
  window.livereOptions = {
    refer: location.pathname.replace(CONFIG.root, '').replace('index.html', '')
  };
  (function(d, s) {
    var j, e = d.getElementsByTagName(s)[0];
    if (typeof LivereTower === 'function') { return; }
    j = d.createElement(s);
    j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
    j.async = true;
    e.parentNode.insertBefore(j, e);
  })(document, 'script');
});
</script>


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'qhEhLuMeMOy1zgcBhkqUS6P8-gzGzoHsz',
      appKey     : 'uhkruDLNLNdL5rQjRBY2X9Ke',
      placeholder: "Just go go",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
